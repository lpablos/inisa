import{r as i,j as e}from"./app-19db06cb.js";import{P as w}from"./progressspinner.esm-6354dbd6.js";import{M as R}from"./message.esm-58f5e4cd.js";import{T as U}from"./toast.esm-0ed1f3f5.js";import{C as S,c as T}from"./confirmdialog.esm-4bbc3da3.js";import{D,C as c}from"./column.esm-2e0db536.js";import M from"./NewUsuarioDialog-58dc4d46.js";import{B as p}from"./button.esm-8dbecc90.js";import"./iconbase.esm-8ede90bc.js";import"./index.esm-2b3c0470.js";import"./csstransition.esm-dcf34adf.js";import"./tooltip.esm-01d8262e.js";import"./index.esm-a014419b.js";import"./ripple.esm-586a3f44.js";import"./dialog.esm-18943087.js";import"./overlayservice.esm-1e88b1a3.js";import"./index.esm-e985f2f4.js";import"./inputnumber.esm-1f5b4141.js";import"./index.esm-4dc81cb8.js";import"./inputtext.esm-06be2f11.js";import"./index.esm-6b85df90.js";import"./dropdown.esm-5f54d0b4.js";import"./index.esm-19bb07b4.js";import"./virtualscroller.esm-3b43f60c.js";import"./index.esm-6d34e67f.js";import"./index.esm-87540949.js";import"./index.esm-fe6507a8.js";import"./fieldset.esm-7b191b33.js";const ae=()=>{const s=i.useRef(null),[m,t]=i.useState(!1),[d,g]=i.useState([]),[x,f]=i.useState(!1),[y,h]=i.useState(null);i.useEffect(()=>{u()},[]);const u=async()=>{t(!0);try{setTimeout(async()=>{const r=await axios.get(route("listado.catalogos.detalle.usuarios")),{data:o,status:n}=r;if(n==200){const a=o.map(l=>({id:l.id,nombre:l.name,email:l.email||"",rol:l.roles[0].name||""}));g(a),t(!1)}},800)}catch{t(!1),s.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},j=r=>e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1 mb-4",children:[e.jsx(p,{icon:"pi pi-eye",rounded:!0,severity:"info","aria-label":"User",onClick:()=>C(r.id)}),e.jsx(p,{icon:"pi pi-times",rounded:!0,severity:"danger","aria-label":"Cancel",onClick:()=>E(r),tooltip:"Eliminar",tooltipOptions:{position:"left"}})]}),C=async r=>{try{const o=await axios.get(route("catalogos.detalle.usuario.asc",{id:r})),{status:n,data:a}=o;n===200&&(h(a),f(!0))}catch{s.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de Usuarios.",life:3e3})}},E=r=>{T({message:`Â¿Estas seguro de eliminar a : ${r.nombre} ?`,header:"Confirmacion de Eliminar",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>v(r.id),reject:()=>b()})},v=async r=>{t(!0);try{setTimeout(async()=>{const o=await axios.delete(`${route("eliminar.usuario.registro",{id:r})}`);console.log("Este es el response",o);const{data:n,status:a}=o;a===200&&(s.current.show({severity:"success",summary:"Registro Eliminado",detail:"Cliente Eliminado Correctamente",life:3e3}),t(!1),u())},800)}catch{s.current.show({severity:"error",summary:"Error",detail:"No se pudo eliminar el cliente.",life:3e3}),t(!1)}},b=()=>{s.current.show({severity:"warn",summary:"Sin Detalle",detail:"No se modifico ningun registro",life:3e3})},N=()=>{setTimeout(()=>{u()},700)};return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 text-right",children:e.jsx(p,{icon:"pi pi-history",rounded:!0,severity:"help","aria-label":"Regresar Cotizaciones",tooltip:"Regresar Cotizaciones",tooltipOptions:{position:"left"},onClick:()=>window.location.href=route("catalogo.gral.index")})}),e.jsx(M,{reloadRegistros:N,mostrarModal:x,setMostrarModal:f,registro:y}),e.jsxs("div",{className:"card",children:[m&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(w,{})}),m===!1&&d.length>0&&e.jsxs(D,{value:d,tableStyle:{minWidth:"50rem"},children:[e.jsx(c,{field:"nombre",header:"Nombre"}),e.jsx(c,{field:"email",header:"Correo"}),e.jsx(c,{field:"rol",header:"Rol"}),e.jsx(c,{field:"opciones",header:"Opciones",body:j})]}),m===!1&&d.length===0&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(R,{severity:"info",text:"No existen registros suficientes"})})]}),e.jsx(U,{ref:s}),e.jsx(S,{})]})};export{ae as default};
//# sourceMappingURL=TablaUsuarios-9325b8f9.js.map
