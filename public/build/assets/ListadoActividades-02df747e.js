import{O as R,r as d,P as we,U as Ae,c as X,I as Ie,D as A,j as n}from"./app-6c82f11e.js";import{C as ye,u as Oe,a as De,b as _e}from"./iconbase.esm-c62f15b0.js";import{C as He}from"./csstransition.esm-09727ec9.js";import{C as ze}from"./overlayservice.esm-c4b1edec.js";import{C as Re}from"./index.esm-39b5d000.js";import{C as ke,c as $e}from"./confirmdialog.esm-d706b79b.js";import{T as Fe}from"./toast.esm-8381782e.js";import{B as Ke}from"./badge.esm-76e4667e.js";import{P as Be}from"./column.esm-a678af90.js";import{E as Le}from"./editor.esm-64157026.js";import{I as ve}from"./inputtext.esm-637833b0.js";import{D as be}from"./dropdown.esm-afaf7a02.js";import{C as Me}from"./calendar.esm-d23b41df.js";import{B as q}from"./button.esm-41370389.js";import Ue from"./NuevaActividad-7406abd8.js";import qe from"./EliminarMotivo-8e206d59.js";import Xe from"./NuevaCotizacion-ad2de337.js";import Je from"./BuscadorCotizacion-6b7a3b27.js";import"./dialog.esm-1817fed8.js";import"./index.esm-366dce1b.js";import"./tooltip.esm-0f28f899.js";import"./ripple.esm-79db3f70.js";import"./index.esm-c60f89d0.js";import"./index.esm-e44f5f68.js";import"./inputnumber.esm-83251a88.js";import"./index.esm-ad4d5920.js";import"./index.esm-971704a7.js";import"./virtualscroller.esm-cb5beb47.js";import"./index.esm-7f14e7bd.js";import"./index.esm-86191ea3.js";import"./progressspinner.esm-6c0927c0.js";import"./fieldset.esm-3c09dac3.js";import"./divider.esm-761bc3ac.js";function te(){return te=Object.assign?Object.assign.bind():function(t){for(var a=1;a<arguments.length;a++){var r=arguments[a];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},te.apply(this,arguments)}function fe(t,a){(a==null||a>t.length)&&(a=t.length);for(var r=0,u=new Array(a);r<a;r++)u[r]=t[r];return u}function Ve(t){if(Array.isArray(t))return fe(t)}function We(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function je(t,a){if(t){if(typeof t=="string")return fe(t,a);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fe(t,a)}}function Ye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ge(t){return Ve(t)||We(t)||je(t)||Ye()}function J(t){"@babel/helpers - typeof";return J=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},J(t)}function Qe(t,a){if(J(t)!=="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var u=r.call(t,a||"default");if(J(u)!=="object")return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(t)}function Ze(t){var a=Qe(t,"string");return J(a)==="symbol"?a:String(a)}function et(t,a,r){return a=Ze(a),a in t?Object.defineProperty(t,a,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[a]=r,t}function tt(t){if(Array.isArray(t))return t}function at(t,a){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var u,m,I,y,h=[],P=!0,O=!1;try{if(I=(r=r.call(t)).next,a===0){if(Object(r)!==r)return;P=!1}else for(;!(P=(u=I.call(r)).done)&&(h.push(u.value),h.length!==a);P=!0);}catch(D){O=!0,m=D}finally{try{if(!P&&r.return!=null&&(y=r.return(),Object(y)!==y))return}finally{if(O)throw m}}return h}}function rt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function he(t,a){return tt(t)||at(t,a)||je(t,a)||rt()}var nt={root:"p-accordion p-component",accordiontab:{root:function(a){var r=a.selected;return X("p-accordion-tab",{"p-accordion-tab-active":r})},content:"p-accordion-content",header:function(a){var r=a.selected,u=a.getTabProp,m=a.tab;return X("p-accordion-header",{"p-highlight":r,"p-disabled":u(m,"disabled")})},headeraction:"p-accordion-header-link",headericon:"p-accordion-toggle-icon",headertitle:"p-accordion-header-text",toggleablecontent:"p-toggleable-content",transition:"p-toggleable-content"}},ot=`
@layer primereact {
    .p-accordion-header-link {
        cursor: pointer;
        display: flex;
        align-items: center;
        user-select: none;
        position: relative;
        text-decoration: none;
    }
    
    .p-accordion-header-link:focus {
        z-index: 1;
    }
    
    .p-accordion-header-text {
        line-height: 1;
        width: 100%;
    }
}
`,ee=ye.extend({defaultProps:{__TYPE:"Accordion",id:null,activeIndex:null,className:null,style:null,multiple:!1,expandIcon:null,collapseIcon:null,transitionOptions:null,onTabOpen:null,onTabClose:null,onTabChange:null,children:void 0},css:{classes:nt,styles:ot}}),k=ye.extend({defaultProps:{__TYPE:"AccordionTab",className:null,contentClassName:null,contentStyle:null,disabled:!1,header:null,headerClassName:null,headerStyle:null,headerTemplate:null,style:null,tabIndex:0,children:void 0},getCProp:function(a,r){return R.getComponentProp(a,r,k.defaultProps)},getCProps:function(a){return R.getComponentProps(a,k.defaultProps)},getCOtherProps:function(a){return R.getComponentDiffProps(a,k.defaultProps)}});function ge(t,a){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);a&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(t,m).enumerable})),r.push.apply(r,u)}return r}function z(t){for(var a=1;a<arguments.length;a++){var r=arguments[a]!=null?arguments[a]:{};a%2?ge(Object(r),!0).forEach(function(u){et(t,u,r[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ge(Object(r)).forEach(function(u){Object.defineProperty(t,u,Object.getOwnPropertyDescriptor(r,u))})}return t}var Ce=function(){},xe=d.forwardRef(function(t,a){var r=Oe(),u=d.useContext(we),m=ee.getProps(t,u),I=d.useState(m.id),y=he(I,2),h=y[0],P=y[1],O=d.useState(m.activeIndex),D=he(O,2),$=D[0],ae=D[1],S=d.useRef(null),E=m.onTabChange?m.activeIndex:$,F=d.Children.count(m.children),V={props:m,state:{id:h,activeIndex:$}},w=ee.setMetaData(z({},V)),_=w.ptm,re=w.ptmo,j=w.cx,W=w.isUnstyled;De(ee.css.styles,W,{name:"accordion"});var l=function(e,i){return k.getCProp(e,i)},g=function(e,i,c){var f={parent:V,context:{index:c,count:F,first:c===0,last:c===F-1,selected:M(c),disabled:l(e,"disabled")}};return r(_("tab.".concat(i),{tab:f}),_("accordiontab.".concat(i),{accordiontab:f}),_("accordiontab.".concat(i),f),re(l(e,"pt"),i,f))},Y=function(e,i,c){K(e,i,c)},K=function(e,i,c){if(!l(i,"disabled")){var f=M(c),C=null;if(m.multiple){var x=E||[];C=f?x.filter(function(U){return U!==c}):[].concat(Ge(x),[c])}else C=f?null:c;var T=f?m.onTabClose:m.onTabOpen;T&&T({originalEvent:e,index:c}),m.onTabChange?m.onTabChange({originalEvent:e,index:C}):ae(C)}e.preventDefault()},ne=function(e,i,c){switch(e.code){case"ArrowDown":oe(e);break;case"ArrowUp":ie(e);break;case"Home":G(e);break;case"End":Q(e);break;case"Enter":case"NumpadEnter":case"Space":se(e,i,c);break}},oe=function(e){var i=B(e.target.parentElement.parentElement);i?H(i):G(e),e.preventDefault()},ie=function(e){var i=L(e.target.parentElement.parentElement);i?H(i):Q(e),e.preventDefault()},G=function(e){var i=ce();H(i),e.preventDefault()},Q=function(e){var i=le();H(i),e.preventDefault()},se=function(e,i,c){K(e,i,c),e.preventDefault()},B=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=i?e:e.nextElementSibling,f=A.findSingle(c,'[data-pc-section="header"]');return f?A.getAttribute(f,"data-p-disabled")?B(f.parentElement):A.findSingle(f,'[data-pc-section="headeraction"]'):null},L=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,c=i?e:e.previousElementSibling,f=A.findSingle(c,'[data-pc-section="header"]');return f?A.getAttribute(f,"data-p-disabled")?L(f.parentElement):A.findSingle(f,'[data-pc-section="headeraction"]'):null},ce=function(){return B(S.current.firstElementChild,!0)},le=function(){return L(S.current.lastElementChild,!0)},H=function(e){e&&A.focus(e)},M=function(e){return m.multiple&&Array.isArray(E)?E&&E.some(function(i){return i===e}):E===e};if(d.useImperativeHandle(a,function(){return{props:m,getElement:function(){return S.current}}}),_e(function(){h||P(Ae())}),!h)return null;var de=function(e,i,c){var f=z(z({},l(e,"style")||{}),l(e,"headerStyle")||{}),C=h+"_header_"+c,x=h+"_content_"+c,T=l(e,"disabled")?-1:l(e,"tabIndex"),U=r({className:j("accordiontab.headertitle")},g(e,"headertitle",c)),Z=k.getCProps(e),ue=l(e,"headerTemplate")?R.getJSXElement(l(e,"headerTemplate"),Z):d.createElement("span",U,R.getJSXElement(l(e,"header"),Z)),me=r({"aria-hidden":"true",className:j("accordiontab.headericon")},g(e,"headericon",c)),Te=i?m.collapseIcon||d.createElement(ze,me):m.expandIcon||d.createElement(Re,me),Pe=Ie.getJSXIcon(Te,z({},me),{props:m,selected:i}),Ne=r({className:X(l(e,"headerClassName"),l(e,"className"),j("accordiontab.header",{selected:i,getTabProp:l,tab:e})),style:f,"data-p-highlight":i,"data-p-disabled":l(e,"disabled")},g(e,"header",c)),Se=r({id:C,href:"#"+x,className:j("accordiontab.headeraction"),role:"button",tabIndex:T,onClick:function(pe){return Y(pe,e,c)},onKeyDown:function(pe){return ne(pe,e,c)},"aria-disabled":l(e,"disabled"),"aria-controls":x,"aria-expanded":i},g(e,"headeraction",c));return d.createElement("div",Ne,d.createElement("a",Se,Pe,ue))},s=function(e,i,c){var f=z(z({},l(e,"style")||{}),l(e,"contentStyle")||{}),C=h+"_content_"+c,x=h+"_header_"+c,T=d.createRef(),U=r({id:C,ref:T,className:X(l(e,"contentClassName"),l(e,"className"),j("accordiontab.toggleablecontent")),style:f,role:"region","aria-labelledby":x},g(e,"toggleablecontent",c)),Z=r({className:j("accordiontab.content")},g(e,"content",c)),ue=r({classNames:j("accordiontab.transition"),timeout:{enter:1e3,exit:450},in:i,unmountOnExit:!0,options:m.transitionOptions},g(e,"transition",c));return d.createElement(He,te({nodeRef:T},ue),d.createElement("div",U,d.createElement("div",Z,l(e,"children"))))},o=function(e,i){if(R.isValidChild(e,"AccordionTab")){var c=h+"_"+i,f=M(i),C=de(e,f,i),x=s(e,f,i),T=r({key:c,className:j("accordiontab.root",{selected:f})},k.getCOtherProps(e),g(e,"root",i));return d.createElement("div",T,C,x)}return null},p=function(){return d.Children.map(m.children,o)},v=p(),N=r({className:X(m.className,j("root")),style:m.style},ee.getOtherProps(m),_("root"));return d.createElement("div",te({id:h,ref:S},N),v)});Ce.displayName="AccordionTab";xe.displayName="Accordion";const Ft=({nombre:t,registros:a=[],paginaActual:r,perPage:u,total:m,onPageChange:I,recargar:y})=>{const h=d.useRef(null),[P,O]=d.useState((r-1)*u),[D,$]=d.useState(!1),[ae,S]=d.useState(!1),[E,F]=d.useState(!1),[V,w]=d.useState(null),[_,re]=d.useState(null),[j,W]=d.useState(null),[l,g]=d.useState([]);d.useState(t),d.useState("Generar y enviar el informe de ventas correspondiente a la semana actual al equipo de dirección.");const Y=[{name:"Baja",code:"Baja"},{name:"Media",code:"Media"},{name:"Alta",code:"Alta"}],K=[{name:"Pendiente",code:"Pendiente"},{name:"Realizado",code:"Realizado"}],ne=(s,o)=>{const p=[...l];p[o].titulo=s,g(p)},oe=(s,o)=>{const p=[...l];p[o].prioridad=s.code,g(p)},ie=(s,o)=>{const p=[...l];p[o].prioridad=s.code,g(p)},G=(s,o)=>{const p=[...l];p[o].fecha=s,g(p)},Q=(s,o)=>{const p=[...l];p[o].descripcion=s,g(p)},se=s=>{const o=s.page+1;I(o)},B=(s,o)=>{$(!0),w(s)},L=(s,o)=>{S(!0),re(s)};d.useEffect(()=>{g(a)},[a]),d.useEffect(()=>{O((r-1)*u)},[r,u]);const ce=({responsable:s,titulo:o,descripcion:p,prioridad:v,estatus:N,fecha:b})=>o!=null&&o.trim()?p!=null&&p.trim()?v?N?b?null:"Selecciona una fecha.":"Selecciona un estatus.":"Selecciona una prioridad.":"La descripción es obligatoria.":"El título es obligatorio.",le=async(s,o)=>{const p={titulo:l[o].titulo,descripcion:l[o].descripcion,prioridad:l[o].prioridad,estatus:l[o].estatus,fecha:l[o].fecha},v=ce(p);if(v){h.current.show({severity:"error",summary:"Error",detail:v,life:3e3});return}try{const N=await axios.put(route("activiades.update",s),p),{data:b,status:e}=N;e===200&&(h.current.show({severity:"success",summary:"Success",detail:`${b.success}`,life:3e3}),y(1))}catch(N){console.error(N),setLoading(!1),h.current.show({severity:"error",summary:"Error",detail:"Error al actualizar la actividad",life:3e3}),setDesabilitar(!1)}},H=()=>{h.current.show({severity:"warn",summary:"Rejected",detail:"No se realizo ningun cambio",life:3e3})},M=(s,o)=>{$e({message:"¿Estas seguro que deseas actualizar este registro?",header:"Confirmation",icon:"pi pi-exclamation-triangle",defaultFocus:"accept",accept:()=>le(s,o),reject:H})},de=(s,o)=>{F(!0),W(s)};return n.jsxs("div",{className:"card",children:[n.jsx("div",{className:"grid m-1",children:n.jsx("div",{className:"col-12 text-right",children:n.jsx(Ue,{usuario:t})})}),l.length===0?n.jsx("div",{className:"p-4 text-gray-500 text-center italic",children:"No hay actividades registradas en el rango de fechas."}):n.jsx(n.Fragment,{children:n.jsx(xe,{activeIndex:0,children:l.map((s,o)=>{var p;return n.jsx(Ce,{header:n.jsxs("span",{className:"flex align-items-center gap-2 w-full",children:[n.jsx("span",{className:"font-bold white-space-nowrap",children:n.jsx("strong",{children:s.titulo})}),n.jsx(Ke,{value:new Date(s.created_at).toLocaleDateString("es-MX"),className:"ml-auto"})]}),children:n.jsxs("div",{className:"flex flex-column gap-3",children:[n.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[n.jsxs("div",{className:"flex-auto min-w-[250px]",children:[n.jsx("label",{htmlFor:`responsable-${o}`,className:"font-bold block mb-2",children:"Responsable"}),n.jsx(ve,{id:`responsable-${o}`,value:s.usuario.name,className:"w-full",placeholder:"Nombre del responsable",readOnly:!0})]}),n.jsxs("div",{className:"flex-auto min-w-[250px]",children:[n.jsx("label",{htmlFor:`titulo-${o}`,className:"font-bold block mb-2",children:"Titulo"}),n.jsx(ve,{id:`titulo-${o}`,value:s.titulo,className:"w-full",placeholder:"Titulo",onChange:v=>ne(v.target.value,o)})]}),n.jsxs("div",{className:"flex-auto min-w-[250px]",children:[n.jsx("label",{htmlFor:`prioridad-${o}`,className:"font-bold block mb-2",children:"Prioridad"}),n.jsx(be,{inputId:`prioridad-${o}`,value:Y.find(v=>v.code===s.prioridad),onChange:v=>oe(v.value,o),options:Y,optionLabel:"name",placeholder:"Selecciona Prioridad",className:"w-full"})]}),n.jsxs("div",{className:"flex-auto min-w-[250px]",children:[n.jsx("label",{htmlFor:`estatus-${o}`,className:"font-bold block mb-2",children:"Estatus"}),n.jsx(be,{inputId:`estatus-${o}`,value:K.find(v=>v.code===s.estatus),onChange:v=>ie(v.value),options:K,optionLabel:"name",placeholder:"Selecciona Estatus",className:"w-full"})]}),n.jsxs("div",{className:"flex-auto min-w-[250px]",children:[n.jsx("label",{htmlFor:`fecha-${o}`,className:"font-bold block mb-2",children:"Fecha Limite"}),n.jsx(Me,{inputId:`fecha-${o}`,value:s.fecha?new Date(s.fecha):null,onChange:v=>G(v.value,o),dateFormat:"dd/mm/yy",className:"w-full",showIcon:!0})]})]}),n.jsx(Le,{value:s.descripcion,onTextChange:v=>Q(v.htmlValue,o),style:{height:"120px"}}),((p=s.cotizaciones)==null?void 0:p.length)>0&&n.jsxs(n.Fragment,{children:[n.jsx("p",{children:"Cotizaciones Asociadas"}),n.jsx("div",{className:"flex justify-center",children:n.jsx("div",{className:"flex gap-2",children:s.cotizaciones.map((v,N)=>n.jsx(q,{outlined:!0,label:v.folio??"Cotización",severity:"secondary",size:"small",onClick:()=>window.open(route("cotizacion.captura.detalle",{identy:v.id}),"_blank")},v.id))})})]}),n.jsx("div",{className:"flex justify-center",children:n.jsxs("div",{className:"flex gap-2 p-4",children:[n.jsx(q,{label:"Asociar Cotización",className:"p-button-sm",onClick:()=>de(s.id)}),n.jsx(q,{label:"Nueva Cotización",className:"p-button-sm",onClick:()=>L(s.id)}),n.jsx(q,{label:"Actualizar",className:"p-button-sm",onClick:()=>M(s.id,o)}),n.jsx(q,{label:"Eliminar",className:"p-button-sm p-button-danger",onClick:()=>B(s.id)})]})})]})},s.id)})})}),n.jsx(Be,{first:P,rows:u,totalRecords:m,onPageChange:se,rowsPerPageOptions:[20]}),n.jsx(Xe,{preguntaNuevaCotizacion:ae,setPreguntaNuevaCotizacion:S,identyNewCotizacion:_,recargar:y}),n.jsx(qe,{activarEliminar:D,setPreguntaEliminar:$,identyDelete:V,setIdentyDelete:w,recargar:y}),n.jsx(Je,{preguntaBusquedaCotizaciones:E,setPreguntaBusquedaCotizaciones:F,identyAsociaActividad:j,setIdentyAsociaActividad:W,recargar:y}),n.jsx(ke,{}),n.jsx(Fe,{ref:h})]})};export{Ft as default};
//# sourceMappingURL=ListadoActividades-02df747e.js.map
