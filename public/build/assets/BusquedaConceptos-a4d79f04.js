import{r as t,j as e,a as T}from"./app-19db06cb.js";import{B as S}from"./button.esm-8dbecc90.js";import{D as G}from"./dialog.esm-18943087.js";import M from"./TableConceptosGral-ac8ce8a7.js";import{I as N}from"./inputtext.esm-06be2f11.js";import{P as $}from"./progressspinner.esm-6354dbd6.js";import{D as y}from"./dropdown.esm-5f54d0b4.js";import"./iconbase.esm-8ede90bc.js";import"./index.esm-e985f2f4.js";import"./ripple.esm-586a3f44.js";import"./tooltip.esm-01d8262e.js";import"./csstransition.esm-dcf34adf.js";import"./index.esm-a014419b.js";import"./column.esm-2e0db536.js";import"./inputnumber.esm-1f5b4141.js";import"./index.esm-4dc81cb8.js";import"./index.esm-6b85df90.js";import"./virtualscroller.esm-3b43f60c.js";import"./index.esm-6d34e67f.js";import"./index.esm-2b3c0470.js";import"./overlayservice.esm-1e88b1a3.js";import"./index.esm-87540949.js";import"./index.esm-fe6507a8.js";import"./confirmdialog.esm-4bbc3da3.js";import"./toast.esm-0ed1f3f5.js";import"./purify.es-851ec8c9.js";import"./index.esm-19bb07b4.js";const ge=({cotizacion:m,setReloadList:w})=>{const[a,i]=t.useState(!1),[n,p]=t.useState(""),[u,d]=t.useState(!1),[f,h]=t.useState([]),[E,D]=t.useState(0),[x,g]=t.useState(""),[j,k]=t.useState(null),[F,H]=t.useState([{name:"Ninguno",value:0},{name:"Captura Tomo",value:1},{name:"Listar Tomos",value:2}]),[L,A]=t.useState([]),[r,B]=t.useState(0),[b,q]=t.useState(""),[v,I]=t.useState(null),P=o=>{const s=o.target.value;p(s),s.length<10?g("El concepto debe tener al menos 15 caracteres."):g("")},R=async()=>{d(!0),setTimeout(()=>{d(!1)},2e3);try{const o=await T.post(`${route("buscador.general.concepto")}`,{concepto:n});if(o.status===200){const{data:s,mensaje:C,registros:l}=o.data;h(s),D(l)}}catch(o){console.log("Este dato ",o),alert("Error")}},z=async()=>{await T.get(`${route("cotizacion.list.tomos",{identy:j})}`).then(o=>{const{data:s,status:C}=o;if(C==200){const l=s.map(c=>({id:c.id,name:c.PDA+" - "+c.descripcion}));A(l)}})},V=o=>{alert("Validacion"),console.log("Evento recibido del hijo:",o)};return t.useEffect(()=>{a&&z()},[a]),t.useEffect(()=>{k(m)},[m]),e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"mr-1",icon:"pi pi-search",rounded:!0,"aria-label":"Search",tooltip:"Busqueda Conceptos",tooltipOptions:{position:"left"},onClick:()=>i(!0)}),e.jsxs(G,{header:"Busqueda de Conceptos",visible:a,maximizable:!0,style:{width:"80vw"},onHide:()=>{a&&i(!1)},children:[e.jsxs("div",{class:"formgrid grid",children:[e.jsxs("div",{class:"field col-3",children:[e.jsx("label",{htmlFor:"defineTomo",className:"font-bold block mb-2",children:"DefiniciÃ³n de Tomo"}),e.jsx(y,{value:r,onChange:o=>B(o.value),options:F,optionLabel:"name",editable:!0,placeholder:"Selecione un tomo",className:"w-full md:w-14rem"})]}),e.jsxs("div",{class:"field col-9",children:[r==1&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"mile",className:"font-bold block mb-2",children:"Captura un Tomo"}),e.jsx(N,{value:b,onChange:o=>q(o.target.value),className:"w-full"})]}),r==2&&e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"selectTomo",className:"font-bold block mb-2",children:"Selecciona un Tomo"}),e.jsx(y,{value:v,onChange:o=>I(o.value),options:L,optionLabel:"name",editable:!0,placeholder:"Seleccione",className:"w-full"})]})]})]}),e.jsx("div",{className:"flex justify-content-center m-4",children:e.jsxs("div",{className:"p-inputgroup flex-1",children:[e.jsx(N,{placeholder:"Captura el concepto a buscar",className:"p-inputtext-lg",value:n,onChange:o=>P(o)}),e.jsx(S,{icon:"pi pi-search",onClick:()=>R(),disabled:n.length<10})]})}),x&&e.jsx("div",{className:"flex justify-content-center m-4",children:e.jsx("div",{className:"p-inputgroup flex-1",children:e.jsx("small",{style:{color:"red"},children:x})})}),u&&e.jsx("div",{className:"flex justify-content-center m-4",children:e.jsx($,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:".5s"})}),u==!1&&f.length>0&&e.jsx(M,{listadoConceptos:f,totalesAsc:E,seleccionTomo:v,perteneceTomo:r,capturaTomo:b,identyCotizacion:j,setReloadList:w,setRegistros:h,validacionConcepto:V,setVisibleModal:i,setConceptoInput:p})]})]})};export{ge as default};
//# sourceMappingURL=BusquedaConceptos-a4d79f04.js.map
