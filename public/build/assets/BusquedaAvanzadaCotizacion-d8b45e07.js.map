{"version":3,"file":"BusquedaAvanzadaCotizacion-d8b45e07.js","sources":["../../../resources/js/Pages/Cotizaciones/partials/BusquedaAvanzadaCotizacion.jsx"],"sourcesContent":["import React, { Component, useState, useRef } from 'react';\nimport axios from \"axios\";\nimport { Button } from 'primereact/button';\nimport { Dialog } from 'primereact/dialog';\nimport { ProgressSpinner } from 'primereact/progressspinner';\n        \n\n\nimport { InputText } from 'primereact/inputtext';\nimport { Dropdown } from 'primereact/dropdown';\nimport { useEffect } from 'react';\nimport { Toast } from 'primereact/toast';\nimport { Calendar } from 'primereact/calendar';\n        \n\nconst BusquedaAvanzadaCotizacion = ({resultadosBusqueda}) => {\n    const toast = useRef(null);\n    const [visible, setVisible] = useState(false);\n    const [catCliente, setCatCliente]= useState([])\n    const [catEstatus, setCatEstatus]= useState([])\n    const [catPrioridad, setCatPrioridad]= useState([])\n    const [cargando, setCargango]=useState(false);\n    const [deshabilitar, setDeshabilitar] = useState(false)\n\n\n    const [cotizacion, setCotizacion] = useState('');\n    const [titulo, setTitulo] = useState('');\n    const [cliente, setCliente]= useState(null);\n    const [estatus, setEstatus]= useState(null);\n    const [prioridad, setPrioridad]= useState(null);\n    const [fechaInicial, setFechaInicial]= useState('');\n    const [fechaFinal, setFechaFinal]= useState('');\n\n    const obtenerClientes = async () => {\n        try {\n            const response = await axios.get(\n                route(\"catalogo.list.clientes\")\n            );\n            const {data} = response\n            const nuevoObjecto = data.map((item)=>({\n                id: item.id,\n                nombre: `${item.abreviacion} - ${item.nombre}`,\n                abreviacion: item.abreviacion,\n            }));\n            setCatCliente(nuevoObjecto);\n        } catch (error) {\n            toast.current.show({\n                severity: \"error\",\n                summary: \"Error\",\n                detail: \"No se pudo obtener la lista de clientes.\",\n                life: 3000,\n            });\n        }\n    };\n\n    const obtenerStatuses = async () => {\n        try {\n            const response = await axios.get(route(\"catalogo.list.status\"));\n            const {data} = response\n            const nuevoObjecto2 = data.map((item)=>({\n                id: item.id,\n                nombre: item.nombre,\n                abreviacion: item.abreviacion,\n                descripcion: `${item.abreviacion} : ${item.descripcion}`,\n            }));\n           \n            setCatEstatus(nuevoObjecto2);\n        } catch (error) {\n            toast.current.show({\n                severity: \"error\",\n                summary: \"Error\",\n                detail: \"No se pudo obtener la lista de statuses.\",\n                life: 3000,\n            });\n        }\n    };\n\n    const obtenerPrioridad = async () => {\n        try {\n            const response = await axios.get(\n                route(\"catalogo.list.prioridades\")\n            );\n            const {data} = response\n            setCatPrioridad(data);\n        } catch (error) {\n            toast.current.show({\n                severity: \"error\",\n                summary: \"Error\",\n                detail: \"No se pudo obtener la lista de prioridades.\",\n                life: 3000,\n            });\n        }\n    };\n\n    const buscarAvanzadamente = async() =>{\n        setCargango(true)\n        setDeshabilitar(true)\n        const datos = {\n            cotizacion: cotizacion,\n            titulo: titulo,\n            cliente: cliente,\n            estatus: estatus,\n            fechaInicial: fechaInicial,\n            fechaFinal: fechaFinal,\n            prioridad:prioridad,\n        };\n        try {\n            const response = await axios.post(route(\"buscador.cotizaciones.list\"),datos);\n            const {data} = response\n            resultadosBusqueda(data)\n            limpiarFormulario()\n            setVisible(false)\n            setTimeout(() => {\n                setCargango(false)\n                setDeshabilitar(false)                \n            }, 800);\n            // setCatEstatus(nuevoObjecto2);\n        } catch (error) {\n            toast.current.show({\n                severity: \"error\",\n                summary: \"Error\",\n                detail: \"No se pudo obtener la lista de statuses.\",\n                life: 3000,\n            });\n            setCargango(false)\n            setDeshabilitar(false)\n        }\n    }\n\n    const limpiarFormulario = () =>{\n        setCotizacion('')\n        setTitulo('')\n        setCliente(null)\n        setEstatus(null)\n        setPrioridad(null)\n        setFechaInicial('')\n        setFechaFinal('')\n    }\n\n    useEffect(()=>{\n        obtenerClientes()\n        obtenerStatuses()\n        obtenerPrioridad()\n    },[])\n\n    return (\n        <div className=\"flex justify-content-center ml-2\">\n            <Button \n                icon=\"pi pi-search-plus\" \n                tooltip=\"Búsqueda avanzada\" \n                tooltipOptions={{ showDelay: 100, hideDelay: 300 }} \n                rounded \n                onClick={() => setVisible(true)} />\n            <Dialog header=\"Buscador Avanzado\" visible={visible} maximizable style={{ width: '50vw' }} onHide={() => {if (!visible) return; setVisible(false); }}>\n               \n            <div className=\"card\">\n                {cargando === false && (\n                    <>\n                        <div className=\"flex flex-wrap gap-3 mb-4\">\n                            <div className=\"flex-auto\">\n                                <label htmlFor=\"Cotización\" className=\"font-bold block mb-2\">\n                                    Cotización\n                                </label>\n                                <InputText value={cotizacion} onChange={(e) => setCotizacion(e.target.value)} />\n                            </div>\n                            <div className=\"flex-auto\">\n                                <label htmlFor=\"Titulo\" className=\"font-bold block mb-2\">\n                                    Titulo\n                                </label>\n                                <InputText value={titulo} onChange={(e) => setTitulo(e.target.value)} />\n                                \n                            </div>\n                            <div className=\"flex-auto\">\n                                <label htmlFor=\"Cliente\" className=\"font-bold block mb-2\">\n                                    Cliente\n                                </label>\n                                <Dropdown value={cliente} onChange={(e) => setCliente(e.value)} options={catCliente} optionLabel=\"nombre\" placeholder=\"Seleciona el Cliente\" className=\"w-full md:w-14rem\" />\n                            </div>\n                        </div>\n                        <div className=\"flex flex-wrap gap-3 mb-4\">\n                            <div className=\"flex-auto\">\n                                <label htmlFor=\"Estatus\" className=\"font-bold block mb-2\">\n                                    Estatus\n                                </label>\n                                <Dropdown value={estatus} onChange={(e) => setEstatus(e.value)} options={catEstatus} optionLabel=\"descripcion\" placeholder=\"Seleciona Cliente\" className=\"w-full md:w-14rem\" />\n                            </div>\n                            <div className=\"flex-auto\">\n                                <label htmlFor=\"Prioridad\" className=\"font-bold block mb-2\">\n                                    Prioridad\n                                </label>\n                                <Dropdown value={prioridad} onChange={(e) => setPrioridad(e.value)} options={catPrioridad} optionLabel=\"nombre\" placeholder=\"Seleciona Prioridad\" className=\"w-full md:w-14rem\" />\n                            </div>    \n                            <div className=\"flex-auto\">\n                                <label htmlFor=\"Fecha Inicial\" className=\"font-bold block mb-2\">\n                                    Fecha Inicial\n                                </label>\n                                <Calendar value={fechaInicial} onChange={(e) => setFechaInicial(e.value)} />\n                            </div>\n                            <div className=\"flex-auto\">\n                                <label htmlFor=\"Fecha Final\" className=\"font-bold block mb-2\">\n                                    Fecha Final\n                                </label>\n                                <Calendar value={fechaFinal} onChange={(e) => setFechaFinal(e.value)} />\n                            </div>                 \n                        </div>    \n                    </>\n                )}\n                {cargando === true && (\n                    <div className=\"card flex justify-content-center\">\n                        <ProgressSpinner />\n                    </div>\n                )}\n                <div className=\"flex flex-wrap justify-content-center gap-1\">\n                    <Button label=\"Limpiar\" severity=\"info\" onClick={()=>limpiarFormulario()} disabled={deshabilitar}/>\n                    <Button label=\"Buscar\" severity=\"info\" onClick={()=>buscarAvanzadamente()} disabled={deshabilitar}/>\n                </div>          \n            </div>\n\n            </Dialog>\n        </div>\n    );\n    \n}\n\nexport default BusquedaAvanzadaCotizacion;"],"names":["BusquedaAvanzadaCotizacion","resultadosBusqueda","toast","useRef","visible","setVisible","useState","catCliente","setCatCliente","catEstatus","setCatEstatus","catPrioridad","setCatPrioridad","cargando","setCargango","deshabilitar","setDeshabilitar","cotizacion","setCotizacion","titulo","setTitulo","cliente","setCliente","estatus","setEstatus","prioridad","setPrioridad","fechaInicial","setFechaInicial","fechaFinal","setFechaFinal","obtenerClientes","response","axios","data","nuevoObjecto","item","obtenerStatuses","nuevoObjecto2","obtenerPrioridad","buscarAvanzadamente","datos","limpiarFormulario","useEffect","jsxs","jsx","Button","Dialog","Fragment","InputText","e","Dropdown","Calendar","ProgressSpinner"],"mappings":"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"}