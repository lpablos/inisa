import{r as s,j as e,a as V}from"./app-19db06cb.js";import{B as F}from"./button.esm-8dbecc90.js";import{D as G}from"./dialog.esm-18943087.js";import{E as H}from"./editor.esm-aa5ccd94.js";import{I as D}from"./inputtext.esm-06be2f11.js";import{D as C}from"./dropdown.esm-5f54d0b4.js";import{C as M}from"./calendar.esm-94497439.js";import{T as $}from"./toast.esm-0ed1f3f5.js";import{P as q}from"./progressspinner.esm-6354dbd6.js";import"./iconbase.esm-8ede90bc.js";import"./index.esm-e985f2f4.js";import"./ripple.esm-586a3f44.js";import"./tooltip.esm-01d8262e.js";import"./csstransition.esm-dcf34adf.js";import"./index.esm-a014419b.js";import"./overlayservice.esm-1e88b1a3.js";import"./index.esm-19bb07b4.js";import"./virtualscroller.esm-3b43f60c.js";import"./index.esm-2b3c0470.js";import"./index.esm-87540949.js";const de=({usuario:T,recargar:I})=>{const[p,f]=s.useState(""),[h,x]=s.useState(""),[b,v]=s.useState(null),[j,N]=s.useState(null),[o,g]=s.useState(null),[k,S]=s.useState(null),[w,y]=s.useState(""),[E,n]=s.useState(!1),[A,c]=s.useState(!1),i=s.useRef(null);s.useEffect(()=>{let a=o?o.toISOString().slice(0,10):null;S(a)},[o]);const P=[{label:"Alta",value:"alta"},{label:"Media",value:"media"},{label:"Baja",value:"baja"}],R=[{label:"Pendiente",value:"pendiente"},{label:"Realizado",value:"realizado"}],[z,u]=s.useState(!1);s.useEffect(()=>{f(T)},[]);const B=()=>{x(""),v(null),N(null),g(null),S(null),y("")},L=({responsable:a,titulo:t,descripcion:l,prioridad:r,estatus:d,fecha:m})=>a?t!=null&&t.trim()?l!=null&&l.trim()?r?d?m?null:"Selecciona una fecha.":"Selecciona un estatus.":"Selecciona una prioridad.":"La descripción es obligatoria.":"El título es obligatorio.":"Debes seleccionar un responsable.",O=async a=>{a.preventDefault();const t={responsable:p,titulo:h,descripcion:w,prioridad:b,estatus:j,fecha:k},l=L(t);if(l){i.current.show({severity:"error",summary:"Error",detail:l,life:3e3});return}u(!0),c(!0);try{const r=await V.post(route("activiades.store"),t),{data:d,status:m}=r;m===200&&(i.current.show({severity:"success",summary:"Success",detail:`${d.success}`,life:3e3}),I(1),B(),n(!1),c(!1),setTimeout(()=>{u(!1)},1e3))}catch(r){console.error(r),u(!1),i.current.show({severity:"error",summary:"Error",detail:"Error al registrar la actividad",life:3e3}),c(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx($,{ref:i}),e.jsx(F,{icon:"pi pi-paperclip",onClick:()=>n(!0),tooltip:"Nueva Actividad",tooltipOptions:{position:"bottom",showDelay:200,hideDelay:300},className:"p-button-rounded p-button-info p-button-sm mr-1"}),e.jsx(G,{header:"Actividad",visible:E,maximizable:!0,style:{width:"50vw"},onHide:()=>{E&&n(!1)},children:e.jsx("form",{action:"",onSubmit:O,children:e.jsxs("div",{className:"flex flex-column gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"responsable",className:"font-bold block mb-2",children:"Responsable"}),e.jsx(D,{id:"responsable",value:p,onChange:a=>f(a.target.value),className:"w-full",placeholder:"Nombre del responsable",readOnly:!0})]}),e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"prioridad",className:"font-bold block mb-2",children:"Prioridad *"}),e.jsx(C,{inputId:"prioridad",value:b,options:P,onChange:a=>v(a.value),placeholder:"Selecciona Prioridad",className:"w-full"})]}),e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"estatus",className:"font-bold block mb-2",children:"Estatus *"}),e.jsx(C,{inputId:"estatus",value:j,options:R,onChange:a=>N(a.value),placeholder:"Selecciona Estatus",className:"w-full"})]}),e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"fecha",className:"font-bold block mb-2",children:"Fecha Limite *"}),e.jsx(M,{inputId:"fecha",value:o,onChange:a=>g(a.value),dateFormat:"dd/mm/yy",className:"w-full",showIcon:!0})]}),e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"titulo",className:"font-bold block mb-2",children:"Titulo *"}),e.jsx(D,{id:"titulo",value:h,onChange:a=>x(a.target.value),className:"w-full",placeholder:"Nombre de la actividad"})]})]}),e.jsx(H,{value:w,onTextChange:a=>y(a.htmlValue),style:{height:"120px"}}),z&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(q,{})}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{className:"ml-auto flex gap-2",children:e.jsx(F,{label:"Guardar",disabled:A,size:"small"})})})]})})})]})};export{de as default};
//# sourceMappingURL=NuevaActividad-4d83593e.js.map
