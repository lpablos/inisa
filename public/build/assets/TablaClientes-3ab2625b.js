import{r as a,j as e,a as f}from"./app-5cafe52a.js";import{D as w,C as l}from"./column.esm-7dd01f34.js";import{B as g}from"./button.esm-1465432c.js";import S from"./NewClienteDialog-f29bec92.js";import{T}from"./toast.esm-c4878fe6.js";import{P}from"./progressspinner.esm-a1904699.js";import{M as R}from"./message.esm-fb78f01d.js";import{C as D,c as M}from"./confirmdialog.esm-5639a01b.js";import"./ripple.esm-820e5f58.js";import"./tooltip.esm-ed724f73.js";import"./inputnumber.esm-4c61a45b.js";import"./index.esm-c558f97d.js";import"./inputtext.esm-d107091e.js";import"./index.esm-a2057ab8.js";import"./dropdown.esm-6a8fe11a.js";import"./overlayservice.esm-c6d6d6cf.js";import"./index.esm-c5fdb121.js";import"./index.esm-315bd3cc.js";import"./index.esm-158c931f.js";import"./index.esm-6a647233.js";import"./index.esm-0fdc5dfc.js";import"./dialog.esm-e40c1965.js";import"./fieldset.esm-477f3336.js";import"./editor.esm-55b20851.js";const te=()=>{const o=a.useRef(null),[m,x]=a.useState([]),[d,s]=a.useState(!1),[y,p]=a.useState(!1),[j,h]=a.useState(null),u=async()=>{s(!0);try{setTimeout(async()=>{const r=await f.get(route("catalogos.listado.clientes.empresa")),{data:t,status:c}=r;if(c==200){const n=t.map(i=>({id:i.id,nombre:i.abreviacion+" - "+i.nombre,numeroProvedor:i.numeroProvedor||"",email:i.email||"",telefono:i.telefono||""}));x(n),s(!1)}},800)}catch(r){s(!1),console.error(r),o.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},C=async r=>{try{const t=await f.get(route("catalogos.detalle.cliente.asc",{id:r})),{status:c,data:n}=t;c===200&&(h(n),p(!0))}catch{o.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de clientes.",life:3e3})}},v=r=>{M({message:`¿Estas seguro de eliminar a : ${r.nombre} ?`,header:"Confirmacion de Eliminar",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>b(r.id),reject:()=>E()})},b=async r=>{s(!0);try{setTimeout(async()=>{const t=await f.delete(`${route("catalogo.eliminar.cliente",{id:r})}`),{data:c,status:n}=t;n===200&&(o.current.show({severity:"success",summary:"Registro Eliminado",detail:"Cliente Eliminado Correctamente",life:3e3}),s(!1),u())},800)}catch{o.current.show({severity:"error",summary:"Error",detail:"No se pudo eliminar el cliente.",life:3e3}),s(!1)}},E=()=>{o.current.show({severity:"warn",summary:"Sin Detalle",detail:"No se modifico ningun registro",life:3e3})};a.useEffect(()=>{u()},[]);const N=r=>e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1 mb-4",children:[e.jsx(g,{icon:"pi pi-eye",rounded:!0,severity:"info","aria-label":"User",onClick:()=>C(r.id)}),e.jsx(g,{icon:"pi pi-times",rounded:!0,severity:"danger","aria-label":"Cancel",onClick:()=>v(r),tooltip:"Eliminar",tooltipOptions:{position:"left"}})]});return e.jsxs("div",{className:"col-12",children:[e.jsx(S,{reloadRegistros:u,mostrarModal:y,setMostrarModal:p,registro:j}),e.jsxs("div",{className:"card",children:[d&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(P,{})}),d===!1&&m.length>0&&e.jsxs(w,{value:m,tableStyle:{minWidth:"50rem"},children:[e.jsx(l,{field:"nombre",header:"Nombre"}),e.jsx(l,{field:"numeroProvedor",header:"Num. Provedor"}),e.jsx(l,{field:"email",header:"Correo"}),e.jsx(l,{field:"telefono",header:"Teléfono"}),e.jsx(l,{field:"opciones",header:"Opciones",body:N})]}),d===!1&&m.length===0&&e.jsx(R,{severity:"info",text:"No existen registros suficientes"})]}),e.jsx(T,{ref:o}),e.jsx(D,{})]})};export{te as default};
