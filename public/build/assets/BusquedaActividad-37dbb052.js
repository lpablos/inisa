import{r as t,j as a}from"./app-f5b48f30.js";import{D as h}from"./dropdown.esm-794b1ea8.js";import{C as b}from"./calendar.esm-a8385e10.js";import{B as z}from"./button.esm-9f4ba889.js";import"./iconbase.esm-a910649f.js";import"./overlayservice.esm-5e43e3fd.js";import"./index.esm-5803aef1.js";import"./index.esm-88cead70.js";import"./index.esm-a2a5ba18.js";import"./tooltip.esm-f1d08006.js";import"./csstransition.esm-678c9b82.js";import"./virtualscroller.esm-13f4a162.js";import"./ripple.esm-32b7924c.js";import"./index.esm-59c9c344.js";import"./index.esm-1cd2ea59.js";import"./inputtext.esm-c0ceb7aa.js";const se=t.forwardRef(({setRegistros:w,setPaginaActual:g,setPerPage:j,setTotal:v},N)=>{const[F,I]=t.useState([]),[o,y]=t.useState(new Date),[l,D]=t.useState(new Date),[C,P]=t.useState({selectPersona:{name:"Todos",code:"*"},fecha1:new Date().toISOString().slice(0,10),fecha2:new Date().toISOString().slice(0,10),selectedPrioridad:null,selectedStatus:null}),[i,E]=t.useState({name:"Todos",code:"*"}),[r,x]=t.useState(null),[c,S]=t.useState(null),[d,B]=t.useState(null),[u,O]=t.useState(null);t.useEffect(()=>{T(),k(),setTimeout(async()=>{const e={page:1,selectPersona:i,fecha1:r===null?new Date().toISOString().slice(0,10):r,fecha2:c===null?new Date().toISOString().slice(0,10):c,selectedPrioridad:d,selectedStatus:u};await m(e)},1e3)},[]);const k=()=>{x(new Date),S(new Date)};t.useEffect(()=>{if(o){let e=o?o.toISOString().slice(0,10):null;x(e)}if(l){let e=l?l.toISOString().slice(0,10):null;S(e)}},[o,l]);const T=async()=>{try{setTimeout(async()=>{const e=await axios.get(route("listado.catalogos.detalle.usuarios")),{data:s,status:p}=e;if(p==200){const f=[{name:"Todos",code:"*"},...s.map(n=>({code:n.id,name:n.name}))];I(f)}},800)}catch{toast.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},U=[{name:"Pendiente",code:"Pendiente"},{name:"Realizado",code:"Realizado"}],L=[{name:"Baja",code:"Baja"},{name:"Media",code:"Media"},{name:"Alta",code:"Alta"}],R=async e=>{e.preventDefault();const s={selectPersona:i,fecha1:r,fecha2:c,selectedPrioridad:d,selectedStatus:u};P(s),await m({...s,page:1})},m=async e=>{try{const s=await axios.get(route("busqueda.actividades"),{params:e}),{status:p}=s;if(p===200){const{data:f,current_page:n,per_page:A,total:q}=s.data;w(f),g(n),j(A),v(q)}}catch(s){console.error(s),alert("Error")}};return t.useImperativeHandle(N,()=>({reloadListado(e=1){const s={...C,page:e};m(s)}})),a.jsx("div",{className:"card",children:a.jsxs("form",{action:"",onSubmit:R,children:[a.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[a.jsxs("div",{className:"flex-auto min-w-[250px]",children:[a.jsx("label",{htmlFor:"usuario",className:"font-bold block mb-2",children:"Usuario"}),a.jsx(h,{inputId:"usuario",value:i,onChange:e=>E(e.value),options:F,optionLabel:"name",placeholder:"Selecciona Usuario",className:"w-full"})]}),a.jsxs("div",{className:"flex-auto min-w-[250px]",children:[a.jsx("label",{htmlFor:"estatus",className:"font-bold block mb-2",children:"Estatus"}),a.jsx(h,{inputId:"prioridad",value:u,onChange:e=>O(e.value),options:U,optionLabel:"name",placeholder:"Selecciona Estatus",className:"w-full"})]}),a.jsxs("div",{className:"flex-auto min-w-[250px]",children:[a.jsx("label",{htmlFor:"prioridad",className:"font-bold block mb-2",children:"Prioridad"}),a.jsx(h,{inputId:"estatus",value:d,onChange:e=>B(e.value),options:L,optionLabel:"name",placeholder:"Selecciona Prioridad",className:"w-full"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[a.jsxs("div",{className:"flex-auto min-w-[250px]",children:[a.jsx("label",{htmlFor:"fechainicio",className:"font-bold block mb-2",children:"Fecha inicio"}),a.jsx(b,{inputId:"fechainicio",value:o,onChange:e=>y(e.value),dateFormat:"dd/mm/yy",className:"w-full",showIcon:!0})]}),a.jsxs("div",{className:"flex-auto min-w-[250px]",children:[a.jsx("label",{htmlFor:"fechafin",className:"font-bold block mb-2",children:"Fecha fin"}),a.jsx(b,{inputId:"fechafin",value:l,onChange:e=>D(e.value),dateFormat:"dd/mm/yy",className:"w-full",showIcon:!0})]}),a.jsx("div",{className:"min-w-[250px]  items-end p-4",children:a.jsx(z,{label:"Buscar"})})]})]})})});export{se as default};
//# sourceMappingURL=BusquedaActividad-37dbb052.js.map
