{"version":3,"file":"BusquedaActividad-56735bf1.js","sources":["../../../resources/js/Pages/LogsActividades/partials/BusquedaActividad.jsx"],"sourcesContent":["import React, { useEffect, useState, useRef} from 'react';\nimport { Dropdown } from 'primereact/dropdown';\nimport { Calendar } from 'primereact/calendar';\nimport { Button } from 'primereact/button';\nimport { Toast } from 'primereact/toast';\n\n\n\n\nconst BusquedaActividad = ({setlogsActividades}) => {\n  \n    const toast = useRef(null);\n    const [loading, setLoading] = useState(false);\n    const [date1, setDate1] = useState(new Date());\n    const [date2, setDate2] = useState(new Date());\n    const handleSubmit = async (e) => {\n        e.preventDefault();\n        consultarRegistros()\n    };\n\n    useEffect(()=>{\n        setTimeout(() => {\n            consultarRegistros()           \n            \n        }, 1000);\n    },[])\n\n    const consultarRegistros = async () => {\n        setLoading(true)\n        const valido = valRangoFechas();\n        if (valido) {\n            const datos ={\n                fecha_inicio: date1.toISOString().split('T')[0],\n                fecha_fin: date2.toISOString().split('T')[0],\n            }\n            try {\n                const response = await axios.get(route(\"logs.historico.list\"),{\n                    params: datos\n                });\n                const { data, status} = response\n                if (status === 200) {\n                    setLoading(false)  \n                    setlogsActividades(data)\n                    if(data.length == 0){\n                        toast.current.show({\n                           severity: \"info\",\n                           summary: \"No existen registros\",\n                           detail: \"No sen encontraron registros, intenta con un rango de fechas distintas\",\n                           life: 5000,\n                       });            \n                    }  \n                }\n            } catch (error) {\n                console.error(error);\n                setLoading(false)\n                toast.current.show({\n                    severity: \"error\",\n                    summary: \"Error\",\n                    detail: \"Error al consultar los historicos\",\n                    life: 3000,\n                });\n                setlogsActividades([]);\n            }\n        }{\n            setLoading(false)\n        }\n    \n    };\n\n\n    useEffect(() => {\n      valRangoFechas()\n    }, [date1, date2]);\n\n\n    const valRangoFechas = () => {\n        let validacion = true;\n        if (date1 > date2) {\n            toast.current.show({\n                severity: \"warn\",\n                summary: \"Validación de rango de fechas\",\n                detail: \"La Fecha de inicio no puede ser mayor a la Fecha Fin\",\n                life: 3000,\n            });\n            validacion = false;\n        }\n        if (date1 === null || date1 === '') {\n            toast.current.show({\n                severity: \"warn\",\n                summary: \"Validación Fecha Inicio\",\n                detail: \"La Fecha Inicio tiene que tener un valor definido\",\n                life: 3000,\n            });\n            validacion = false;\n        }\n\n        if (date2 === null || date2 === '') {\n            toast.current.show({\n                severity: \"warn\",\n                summary: \"Validación Fecha Fin\",\n                detail: \"La Fecha Fin tiene que tener un valor definido\",\n                life: 3000,\n            });\n            validacion = false;\n        }\n        return validacion;\n    }\n\n\n    \n    \n\n\n    return (\n        <div className=\"card\">\n            <Toast ref={toast} />\n            <form action=\"\" onSubmit={handleSubmit}>\n               \n                <div className=\"flex flex-wrap gap-3 mb-4\">\n                    <div className=\"flex-auto min-w-[250px]\">\n                        <label htmlFor=\"fechainicio\" className=\"font-bold block mb-2\">Fecha inicio</label>\n                        <Calendar\n                            inputId=\"fechainicio\"\n                            value={date1}\n                            onChange={(e) => setDate1(e.value)}\n                            dateFormat=\"dd/mm/yy\"\n                            className=\"w-full\"\n                            showIcon\n                        />\n                    </div>\n                    <div className=\"flex-auto min-w-[250px]\">\n                        <label htmlFor=\"fechafin\" className=\"font-bold block mb-2\">Fecha fin</label>\n                        <Calendar\n                            inputId=\"fechafin\"\n                            value={date2}\n                            onChange={(e) => setDate2(e.value)}\n                            dateFormat=\"dd/mm/yy\"\n                            className=\"w-full\"\n                            showIcon\n                        />\n                    </div>\n                    <div className=\"min-w-[250px]  items-end p-4\">\n                        <Button type=\"submit\" loading={loading} label=\"Buscar\" />\n                    </div>\n                </div>\n            </form>            \n        </div>\n    );\n};\n\nexport default BusquedaActividad;\n"],"names":["BusquedaActividad","setlogsActividades","toast","useRef","loading","setLoading","useState","date1","setDate1","date2","setDate2","handleSubmit","e","consultarRegistros","useEffect","valRangoFechas","datos","response","data","status","error","validacion","jsxs","jsx","Toast","Calendar","Button"],"mappings":"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"}