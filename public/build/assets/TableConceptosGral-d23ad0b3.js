import{r as t,j as e,a as L}from"./app-954e5f69.js";import{D as P,C as i}from"./column.esm-c6806a2f.js";import{C as V}from"./confirmdialog.esm-dc3e748a.js";import{T as Y}from"./toast.esm-6e989c17.js";import{B as q}from"./button.esm-9fdd79ba.js";import{p as J}from"./purify.es-851ec8c9.js";import"./ripple.esm-80139cd0.js";import"./tooltip.esm-705f6f13.js";import"./inputnumber.esm-4baffdac.js";import"./index.esm-08b88e95.js";import"./inputtext.esm-0428364e.js";import"./index.esm-efa2cd0d.js";import"./dropdown.esm-4239ca6c.js";import"./overlayservice.esm-2156cf47.js";import"./index.esm-d0f281b3.js";import"./index.esm-8e62f4d7.js";import"./index.esm-0f0b731f.js";import"./index.esm-d29e245c.js";import"./index.esm-e45aff0a.js";import"./dialog.esm-9ecdf0e6.js";const ho=({listadoConceptos:n=[],totalesAsc:p=0,seleccionTomo:a,perteneceTomo:c,capturaTomo:l,identyCotizacion:d,setVisibleModal:x,setConceptoInput:_,setReloadList:h,setRegistros:j})=>{const[g,m]=t.useState([]),[K,b]=t.useState([]),[f,u]=t.useState(!1),r=t.useRef(null),[C,y]=t.useState(null),[S,T]=t.useState(null),[v,F]=t.useState(null),[E,M]=t.useState(null),[z,O]=t.useState(null);t.useEffect(()=>{m(n),b(p)},[n]),t.useEffect(()=>{y(a),T(c),F(l),O(d)},[a,c,l,d]);const R=o=>{const{id:s}=o;M(s),u(!0)},k=()=>{_(""),m([]),j([])},I=async()=>{try{const o={identyCotizacion:z,identyConcepto:E,selecTomo:C,pertTomo:S,captTomo:v},s=await L.post(`${route("asociar.concepto.generales")}`,o),{data:Q,success:G}=s.data;s.status==201&&(k(),h(!0),r.current.show({severity:"info",summary:"Confirmed",detail:`${G}`,life:3e3}),setTimeout(()=>{x(!1)},3500)),console.log("Esta es la respues",s)}catch{alert("Error")}},N=()=>{I()},A=()=>{r.current.show({severity:"warn",summary:"Rejected",detail:"You have rejected",life:3e3})},B=o=>e.jsx("div",{className:"flex gap-2",children:e.jsx(q,{severity:"success",size:"small",icon:"pi pi-check-circle",tooltip:"Agregar",tooltipOptions:{position:"bottom",showDelay:200,hideDelay:300},className:"p-button-rounded p-button-info p-button-sm",onClick:()=>R(o)})}),H=o=>e.jsxs("ul",{children:[o.costo_material_cantidad&&e.jsxs("li",{children:[e.jsx("strong",{children:"Cantidad:"})," ",o.costo_material_cantidad]}),o.costo_material_unitario_sugerido&&e.jsxs("li",{children:[e.jsx("strong",{children:"Costo Sugerido:"})," ",o.costo_material_unitario_sugerido.toFixed(2)," ",o.moneda]}),o.costo_material_unitario&&e.jsxs("li",{children:[e.jsx("strong",{children:"Costo:"})," ",o.costo_material_unitario.toFixed(2)," ",o.moneda]}),o.costo_material_subtotal&&e.jsxs("li",{children:[e.jsx("strong",{children:"Costo Subtotal:"})," ",o.costo_material_subtotal.toFixed(2)," ",o.moneda]})]}),U=o=>e.jsxs("ul",{children:[o.costo_mano_obra_unitario_sugerido&&e.jsxs("li",{children:[e.jsx("strong",{children:"Costo Unitario Sugerido:"})," ",o.costo_mano_obra_unitario_sugerido.toFixed(2)," ",o.moneda]}),o.costo_mano_obra_unitario&&e.jsxs("li",{children:[e.jsx("strong",{children:"Costo Unitario:"})," ",o.costo_mano_obra_unitario.toFixed(2)," ",o.moneda]}),o.costo_mano_obra_unitario_sugerido&&e.jsxs("li",{children:[e.jsx("strong",{children:"Subtotal:"})," ",o.costo_mano_obra_unitario_sugerido.toFixed(2)," ",o.moneda]}),o.obra_material_subtotal&&e.jsxs("li",{children:[e.jsx("strong",{children:"M.O./MATER. Subtotal:"})," ",o.obra_material_subtotal.toFixed(2)," ",o.moneda]})]}),$=o=>e.jsx("div",{dangerouslySetInnerHTML:{__html:J.sanitize(o.descripcion)}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card",children:[e.jsxs(P,{value:g,size:"small",paginator:!0,rows:5,children:[e.jsx(i,{field:"descripcion",header:"Descripción",style:{width:"50%"},body:$}),e.jsx(i,{field:"name",header:"Material",body:H}),e.jsx(i,{field:"category",header:"Mano de Obra",body:U}),e.jsx(i,{field:"opciones",header:"Opción",body:B})]}),e.jsx(Y,{ref:r}),e.jsx(V,{group:"declarative",visible:f,onHide:()=>u(!1),message:"¿Estas seguro de agregar este concepto?",header:"Confirmación",icon:"pi pi-exclamation-triangle",accept:N,reject:A,breakpoints:{"1100px":"75vw","960px":"100vw"}})]})})};export{ho as default};
