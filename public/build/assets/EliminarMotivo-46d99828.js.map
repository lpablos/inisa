{"version":3,"file":"EliminarMotivo-46d99828.js","sources":["../../../resources/js/Pages/Actividades/Partials/EliminarMotivo.jsx"],"sourcesContent":["import React, { Component, useState, useEffect, useRef } from \"react\";\nimport { Button } from 'primereact/button';\nimport { Dialog } from 'primereact/dialog';\nimport { Editor } from 'primereact/editor';\nimport { Toast } from 'primereact/toast';\nimport { SplitButton } from 'primereact/splitbutton';\n\n\nconst EliminarMotivo = ({activarEliminar, setPreguntaEliminar, identyDelete, setIdentyDelete, recargar}) => {\n    const [visible, setVisible] = useState(false);\n    const [text, setText] = useState('');\n    const [loader,setLoader] = useState(false);\n    const toast = useRef(null);\n    const [deleteId, setDeleteId] = useState(null);\n\n\n    useEffect(()=>{    \n        if(activarEliminar == true){\n            setVisible(true)\n        }\n        setDeleteId(identyDelete)\n\n    },[activarEliminar, identyDelete])\n\n    useEffect(()=>{\n        if(visible===false){\n            setPreguntaEliminar(false)\n            setText('')\n        }\n    },[visible])\n\n    const validarDatos = ({ responsable, titulo, descripcion, prioridad, estatus, fecha }) => {\n        if (!descripcion?.trim()) return \"La descripción es obligatoria.\";\n        return null; // Todo correcto\n    };\n\n\n    const limpiarFormulario = () =>{\n        setText('')\n    }\n\n    const handleSubmit = async (e) => {\n        e.preventDefault(); \n        setLoader(true);\n        const datos = {\n            descripcion:text,\n        }\n        const error = validarDatos(datos);\n        if (error) {\n            toast.current.show({\n                severity: \"error\",\n                summary: \"Error\",\n                detail: error,\n                life: 3000,\n            });\n                setLoader(false);\n            return;\n        }\n\n        try {\n            const response = await axios.post(route(\"activiades.destroy\", { activiade: deleteId }), {\n                ...datos,                \n                _method: 'DELETE'        \n            });      \n            \n            const { data, status} = response\n            \n            if (status === 200) {\n                toast.current.show({\n                    severity: \"success\",\n                    summary: \"Success\",\n                    detail: `${data.success}`,\n                    life: 3000,\n                });\n                setIdentyDelete(null)\n                limpiarFormulario()\n                setVisible(false)\n                setLoader(false)\n                setPreguntaEliminar(false)\n                recargar(1) // Llamada Externa Funcion Hermano\n            }\n        } catch (error) {\n            toast.current.show({\n                severity: \"error\",\n                summary: \"Error\",\n                detail: \"Erro Al Eliminar Actividad.\",\n                life: 3000,\n            });\n            setLoader(false)\n        }\n\n    };\n    return (    \n        <div className=\"flex justify-content-center\">\n            <Toast ref={toast} />\n            <Dialog header=\"Baja Registro\" visible={visible} style={{ width: '50vw' }} onHide={() => {if (!visible) return; setVisible(false); }}>\n                <form action=\"\" onSubmit={handleSubmit}>\n                    <p className=\"m-0\">\n                        Para continuar con el proceso de eliminación del registro, ¿podría indicarnos el motivo de esta solicitud?.\n                    </p>\n                    <Editor value={text} onTextChange={(e) => setText(e.htmlValue)} style={{ height: '120px' }} className=\"mt-4\"/>\n                    <div className=\"flex items-center gap-3 p-4\">\n                        <div className=\"ml-auto flex gap-2\">\n                            <Button label=\"Eliminar\" icon=\"pi pi-check\" loading={loader}  type=\"submit\"/>\n                        </div>\n                    </div>   \n                </form>\n            </Dialog>\n        </div>\n    );\n};\n\nexport default EliminarMotivo;"],"names":["EliminarMotivo","activarEliminar","setPreguntaEliminar","identyDelete","setIdentyDelete","recargar","visible","setVisible","useState","text","setText","loader","setLoader","toast","useRef","deleteId","setDeleteId","useEffect","validarDatos","responsable","titulo","descripcion","prioridad","estatus","fecha","limpiarFormulario","handleSubmit","e","datos","error","response","data","status","jsxs","jsx","Toast","Dialog","Editor","Button"],"mappings":"8cAQM,MAAAA,EAAiB,CAAC,CAAC,gBAAAC,EAAiB,oBAAAC,EAAqB,aAAAC,EAAc,gBAAAC,EAAiB,SAAAC,KAAc,CACxG,KAAM,CAACC,EAASC,CAAU,EAAIC,WAAS,EAAK,EACtC,CAACC,EAAMC,CAAO,EAAIF,WAAS,EAAE,EAC7B,CAACG,EAAOC,CAAS,EAAIJ,WAAS,EAAK,EACnCK,EAAQC,SAAO,IAAI,EACnB,CAACC,EAAUC,CAAW,EAAIR,WAAS,IAAI,EAG7CS,EAAAA,UAAU,IAAI,CACPhB,GAAmB,IAClBM,EAAW,EAAI,EAEnBS,EAAYb,CAAY,CAAA,EAE1B,CAACF,EAAiBE,CAAY,CAAC,EAEjCc,EAAAA,UAAU,IAAI,CACPX,IAAU,KACTJ,EAAoB,EAAK,EACzBQ,EAAQ,EAAE,EACd,EACF,CAACJ,CAAO,CAAC,EAEL,MAAAY,EAAe,CAAC,CAAE,YAAAC,EAAa,OAAAC,EAAQ,YAAAC,EAAa,UAAAC,EAAW,QAAAC,EAAS,MAAAC,KACrEH,GAAA,MAAAA,EAAa,OACX,KAD0B,iCAK/BI,EAAoB,IAAK,CAC3Bf,EAAQ,EAAE,CAAA,EAGRgB,EAAe,MAAOC,GAAM,CAC9BA,EAAE,eAAe,EACjBf,EAAU,EAAI,EACd,MAAMgB,EAAQ,CACV,YAAYnB,CAAA,EAEVoB,EAAQX,EAAaU,CAAK,EAChC,GAAIC,EAAO,CACPhB,EAAM,QAAQ,KAAK,CACf,SAAU,QACV,QAAS,QACT,OAAQgB,EACR,KAAM,GAAA,CACT,EACGjB,EAAU,EAAK,EACnB,MACJ,CAEI,GAAA,CACM,MAAAkB,EAAW,MAAM,MAAM,KAAK,MAAM,qBAAsB,CAAE,UAAWf,CAAS,CAAC,EAAG,CACpF,GAAGa,EACH,QAAS,QAAA,CACZ,EAEK,CAAE,KAAAG,EAAM,OAAAC,CAAU,EAAAF,EAEpBE,IAAW,MACXnB,EAAM,QAAQ,KAAK,CACf,SAAU,UACV,QAAS,UACT,OAAQ,GAAGkB,EAAK,OAAO,GACvB,KAAM,GAAA,CACT,EACD3B,EAAgB,IAAI,EACFqB,IAClBlB,EAAW,EAAK,EAChBK,EAAU,EAAK,EACfV,EAAoB,EAAK,EACzBG,EAAS,CAAC,QAEF,CACZQ,EAAM,QAAQ,KAAK,CACf,SAAU,QACV,QAAS,QACT,OAAQ,8BACR,KAAM,GAAA,CACT,EACDD,EAAU,EAAK,CACnB,CAAA,EAIA,OAAAqB,EAAA,KAAC,MAAI,CAAA,UAAU,8BACX,SAAA,CAACC,EAAAA,IAAAC,EAAA,CAAM,IAAKtB,CAAO,CAAA,EACnBqB,EAAAA,IAACE,EAAO,CAAA,OAAO,gBAAgB,QAAA9B,EAAkB,MAAO,CAAE,MAAO,MAAU,EAAA,OAAQ,IAAM,CAAMA,GAAiBC,EAAW,EAAK,CAAA,EAC5H,SAAC0B,EAAA,KAAA,OAAA,CAAK,OAAO,GAAG,SAAUP,EACtB,SAAA,CAACQ,EAAA,IAAA,IAAA,CAAE,UAAU,MAAM,SAEnB,8GAAA,QACCG,EAAO,CAAA,MAAO5B,EAAM,aAAekB,GAAMjB,EAAQiB,EAAE,SAAS,EAAG,MAAO,CAAE,OAAQ,SAAW,UAAU,OAAM,QAC3G,MAAI,CAAA,UAAU,8BACX,SAACO,EAAA,IAAA,MAAA,CAAI,UAAU,qBACX,SAAAA,EAAAA,IAACI,GAAO,MAAM,WAAW,KAAK,cAAc,QAAS3B,EAAS,KAAK,SAAQ,EAC/E,CACJ,CAAA,CAAA,CAAA,CACJ,CACJ,CAAA,CACJ,CAAA,CAAA,CAER"}