import{r as a,j as e,a as u}from"./app-954e5f69.js";import{D as w,C as l}from"./column.esm-c6806a2f.js";import{B as f}from"./button.esm-9fdd79ba.js";import R from"./NewClienteDialog-189f6d2e.js";import{T as S}from"./toast.esm-6e989c17.js";import{P as T}from"./progressspinner.esm-cdabcb6e.js";import{M as P}from"./message.esm-1a1e6f10.js";import{C as D,c as M}from"./confirmdialog.esm-dc3e748a.js";import"./ripple.esm-80139cd0.js";import"./tooltip.esm-705f6f13.js";import"./inputnumber.esm-4baffdac.js";import"./index.esm-08b88e95.js";import"./inputtext.esm-0428364e.js";import"./index.esm-efa2cd0d.js";import"./dropdown.esm-4239ca6c.js";import"./overlayservice.esm-2156cf47.js";import"./index.esm-d0f281b3.js";import"./index.esm-8e62f4d7.js";import"./index.esm-0f0b731f.js";import"./index.esm-d29e245c.js";import"./index.esm-e45aff0a.js";import"./dialog.esm-9ecdf0e6.js";import"./fieldset.esm-06a343b0.js";import"./editor.esm-c48e70ce.js";const re=()=>{const t=a.useRef(null),[m,x]=a.useState([]),[d,s]=a.useState(!1),[y,g]=a.useState(!1),[h,j]=a.useState(null),p=async()=>{s(!0);try{setTimeout(async()=>{const o=await u.get(route("catalogos.listado.clientes.empresa")),{data:r,status:c}=o;if(c==200){const n=r.map(i=>({id:i.id,nombre:i.abreviacion+" - "+i.nombre,numeroProvedor:i.numeroProvedor||"",email:i.email||"",telefono:i.telefono||""}));x(n),s(!1)}},800)}catch(o){s(!1),console.error(o),t.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},C=async o=>{try{const r=await u.get(route("catalogos.detalle.cliente.asc",{id:o})),{status:c,data:n}=r;c===200&&(j(n),g(!0))}catch{t.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de clientes.",life:3e3})}},v=o=>{M({message:`¿Estas seguro de eliminar a : ${o.nombre} ?`,header:"Confirmacion de Eliminar",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>b(o.id),reject:()=>E()})},b=async o=>{s(!0);try{setTimeout(async()=>{const r=await u.delete(`${route("catalogo.eliminar.cliente",{id:o})}`),{data:c,status:n}=r;n===200&&(t.current.show({severity:"success",summary:"Registro Eliminado",detail:"Cliente Eliminado Correctamente",life:3e3}),s(!1),p())},800)}catch{t.current.show({severity:"error",summary:"Error",detail:"No se pudo eliminar el cliente.",life:3e3}),s(!1)}},E=()=>{t.current.show({severity:"warn",summary:"Sin Detalle",detail:"No se modifico ningun registro",life:3e3})};a.useEffect(()=>{p()},[]);const N=o=>e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1 mb-4",children:[e.jsx(f,{icon:"pi pi-eye",rounded:!0,severity:"info","aria-label":"User",onClick:()=>C(o.id)}),e.jsx(f,{icon:"pi pi-times",rounded:!0,severity:"danger","aria-label":"Cancel",onClick:()=>v(o),tooltip:"Eliminar",tooltipOptions:{position:"left"}})]});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 text-right",children:e.jsx(f,{icon:"pi pi-history",rounded:!0,severity:"help","aria-label":"Regresar Cotizaciones",tooltip:"Regresar Cotizaciones",tooltipOptions:{position:"left"},onClick:()=>window.location.href=route("catalogo.gral.index")})}),e.jsx(R,{reloadRegistros:p,mostrarModal:y,setMostrarModal:g,registro:h}),e.jsxs("div",{className:"card",children:[d&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(T,{})}),d===!1&&m.length>0&&e.jsxs(w,{value:m,tableStyle:{minWidth:"50rem"},children:[e.jsx(l,{field:"nombre",header:"Nombre"}),e.jsx(l,{field:"numeroProvedor",header:"Num. Provedor"}),e.jsx(l,{field:"email",header:"Correo"}),e.jsx(l,{field:"telefono",header:"Teléfono"}),e.jsx(l,{field:"opciones",header:"Opciones",body:N})]}),d===!1&&m.length===0&&e.jsx(P,{severity:"info",text:"No existen registros suficientes"})]}),e.jsx(S,{ref:t}),e.jsx(D,{})]})};export{re as default};
