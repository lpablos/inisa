import{r as a,j as e,a as u}from"./app-5820f2fc.js";import{D as w,C as l}from"./column.esm-6e840ad8.js";import{B as f}from"./button.esm-a7803143.js";import R from"./NewClienteDialog-f4aee434.js";import{T as S}from"./toast.esm-a8d05a6e.js";import{P as T}from"./progressspinner.esm-d7ca519a.js";import{M as P}from"./message.esm-091d5b35.js";import{C as D,c as M}from"./confirmdialog.esm-2ae93956.js";import"./iconbase.esm-a7b8798a.js";import"./index.esm-d7c3364d.js";import"./paginator.esm-88a658f9.js";import"./ripple.esm-ee4508bf.js";import"./inputnumber.esm-c4ec8b34.js";import"./index.esm-c672f095.js";import"./inputtext.esm-cd831930.js";import"./tooltip.esm-de61fec8.js";import"./index.esm-6b60753d.js";import"./dropdown.esm-e42895fb.js";import"./overlayservice.esm-8c1f21ea.js";import"./index.esm-2acefc1d.js";import"./csstransition.esm-2ed9e3b3.js";import"./virtualscroller.esm-34745144.js";import"./index.esm-4089079a.js";import"./index.esm-969efac0.js";import"./index.esm-c903ef93.js";import"./index.esm-ceb7e810.js";import"./dialog.esm-ed12077b.js";import"./fieldset.esm-3e429a37.js";import"./editor.esm-7abdf248.js";const ne=()=>{const t=a.useRef(null),[m,x]=a.useState([]),[d,i]=a.useState(!1),[y,g]=a.useState(!1),[h,j]=a.useState(null),p=async()=>{i(!0);try{setTimeout(async()=>{const o=await u.get(route("catalogos.listado.clientes.empresa")),{data:r,status:c}=o;if(c==200){const n=r.map(s=>({id:s.id,nombre:s.abreviacion+" - "+s.nombre,numeroProvedor:s.numeroProvedor||"",email:s.email||"",telefono:s.telefono||""}));x(n),i(!1)}},800)}catch(o){i(!1),console.error(o),t.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},C=async o=>{try{const r=await u.get(route("catalogos.detalle.cliente.asc",{id:o})),{status:c,data:n}=r;c===200&&(j(n),g(!0))}catch{t.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de clientes.",life:3e3})}},v=o=>{M({message:`¿Estas seguro de eliminar a : ${o.nombre} ?`,header:"Confirmacion de Eliminar",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>b(o.id),reject:()=>E()})},b=async o=>{i(!0);try{setTimeout(async()=>{const r=await u.delete(`${route("catalogo.eliminar.cliente",{id:o})}`),{data:c,status:n}=r;n===200&&(t.current.show({severity:"success",summary:"Registro Eliminado",detail:"Cliente Eliminado Correctamente",life:3e3}),i(!1),p())},800)}catch{t.current.show({severity:"error",summary:"Error",detail:"No se pudo eliminar el cliente.",life:3e3}),i(!1)}},E=()=>{t.current.show({severity:"warn",summary:"Sin Detalle",detail:"No se modifico ningun registro",life:3e3})};a.useEffect(()=>{p()},[]);const N=o=>e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1 mb-4",children:[e.jsx(f,{icon:"pi pi-eye",rounded:!0,severity:"info","aria-label":"User",onClick:()=>C(o.id)}),e.jsx(f,{icon:"pi pi-times",rounded:!0,severity:"danger","aria-label":"Cancel",onClick:()=>v(o),tooltip:"Eliminar",tooltipOptions:{position:"left"}})]});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 text-right",children:e.jsx(f,{icon:"pi pi-history",rounded:!0,severity:"help","aria-label":"Regresar Cotizaciones",tooltip:"Regresar Cotizaciones",tooltipOptions:{position:"left"},onClick:()=>window.location.href=route("catalogo.gral.index")})}),e.jsx(R,{reloadRegistros:p,mostrarModal:y,setMostrarModal:g,registro:h}),e.jsxs("div",{className:"card",children:[d&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(T,{})}),d===!1&&m.length>0&&e.jsxs(w,{value:m,tableStyle:{minWidth:"50rem"},children:[e.jsx(l,{field:"nombre",header:"Nombre"}),e.jsx(l,{field:"numeroProvedor",header:"Num. Provedor"}),e.jsx(l,{field:"email",header:"Correo"}),e.jsx(l,{field:"telefono",header:"Teléfono"}),e.jsx(l,{field:"opciones",header:"Opciones",body:N})]}),d===!1&&m.length===0&&e.jsx(P,{severity:"info",text:"No existen registros suficientes"})]}),e.jsx(S,{ref:t}),e.jsx(D,{})]})};export{ne as default};
//# sourceMappingURL=TablaClientes-8307c781.js.map
