import{r as o,j as e}from"./app-f5b48f30.js";import{C as u}from"./calendar.esm-a8385e10.js";import{B as y}from"./button.esm-9f4ba889.js";import{T as F}from"./toast.esm-b606329d.js";import"./iconbase.esm-a910649f.js";import"./overlayservice.esm-5e43e3fd.js";import"./index.esm-1cd2ea59.js";import"./index.esm-5803aef1.js";import"./inputtext.esm-c0ceb7aa.js";import"./tooltip.esm-f1d08006.js";import"./ripple.esm-32b7924c.js";import"./csstransition.esm-678c9b82.js";import"./index.esm-88cead70.js";import"./index.esm-59c9c344.js";import"./index.esm-a2a5ba18.js";const k=({setlogsActividades:l})=>{const t=o.useRef(null),[f,r]=o.useState(!1),[s,h]=o.useState(new Date),[i,p]=o.useState(new Date),x=async a=>{a.preventDefault(),c()};o.useEffect(()=>{setTimeout(()=>{c()},1e3)},[]);const c=async()=>{if(r(!0),m()){const v={fecha_inicio:s.toISOString().split("T")[0],fecha_fin:i.toISOString().split("T")[0]};try{const n=await axios.get(route("logs.historico.list"),{params:v}),{data:d,status:w}=n;w===200&&(r(!1),l(d),d.length==0&&t.current.show({severity:"info",summary:"No existen registros",detail:"No sen encontraron registros, intenta con un rango de fechas distintas",life:5e3}))}catch(n){console.error(n),r(!1),t.current.show({severity:"error",summary:"Error",detail:"Error al consultar los historicos",life:3e3}),l([])}}r(!1)};o.useEffect(()=>{m()},[s,i]);const m=()=>{let a=!0;return s>i&&(t.current.show({severity:"warn",summary:"Validación de rango de fechas",detail:"La Fecha de inicio no puede ser mayor a la Fecha Fin",life:3e3}),a=!1),(s===null||s==="")&&(t.current.show({severity:"warn",summary:"Validación Fecha Inicio",detail:"La Fecha Inicio tiene que tener un valor definido",life:3e3}),a=!1),(i===null||i==="")&&(t.current.show({severity:"warn",summary:"Validación Fecha Fin",detail:"La Fecha Fin tiene que tener un valor definido",life:3e3}),a=!1),a};return e.jsxs("div",{className:"card",children:[e.jsx(F,{ref:t}),e.jsx("form",{action:"",onSubmit:x,children:e.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"fechainicio",className:"font-bold block mb-2",children:"Fecha inicio"}),e.jsx(u,{inputId:"fechainicio",value:s,onChange:a=>h(a.value),dateFormat:"dd/mm/yy",className:"w-full",showIcon:!0})]}),e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"fechafin",className:"font-bold block mb-2",children:"Fecha fin"}),e.jsx(u,{inputId:"fechafin",value:i,onChange:a=>p(a.value),dateFormat:"dd/mm/yy",className:"w-full",showIcon:!0})]}),e.jsx("div",{className:"min-w-[250px]  items-end p-4",children:e.jsx(y,{type:"submit",loading:f,label:"Buscar"})})]})})]})};export{k as default};
//# sourceMappingURL=BusquedaActividad-766957c5.js.map
