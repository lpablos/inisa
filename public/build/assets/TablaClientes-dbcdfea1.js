import{r as a,j as e,a as f}from"./app-dd05d154.js";import{D as w,C as l}from"./column.esm-86e9a6a3.js";import{B as g}from"./button.esm-ceaa1394.js";import S from"./NewClienteDialog-6de88ae2.js";import{T}from"./toast.esm-3c5da315.js";import{P}from"./progressspinner.esm-3a320bfa.js";import{M as R}from"./message.esm-8e583b55.js";import{C as D,c as M}from"./confirmdialog.esm-b39e6044.js";import"./ripple.esm-f46f8654.js";import"./tooltip.esm-4fb46b8c.js";import"./inputnumber.esm-c3e00d7e.js";import"./index.esm-52bb2cca.js";import"./inputtext.esm-0282332f.js";import"./index.esm-6e24c569.js";import"./dropdown.esm-65349b16.js";import"./overlayservice.esm-a15357fc.js";import"./index.esm-0900a10d.js";import"./index.esm-8e77f6ec.js";import"./index.esm-639dd832.js";import"./index.esm-c36ca71f.js";import"./index.esm-871fef04.js";import"./dialog.esm-08b8fe93.js";import"./fieldset.esm-74d0e1be.js";import"./editor.esm-5532de27.js";const te=()=>{const o=a.useRef(null),[m,x]=a.useState([]),[d,s]=a.useState(!1),[y,p]=a.useState(!1),[j,h]=a.useState(null),u=async()=>{s(!0);try{setTimeout(async()=>{const r=await f.get(route("catalogos.listado.clientes.empresa")),{data:t,status:c}=r;if(c==200){const n=t.map(i=>({id:i.id,nombre:i.abreviacion+" - "+i.nombre,numeroProvedor:i.numeroProvedor||"",email:i.email||"",telefono:i.telefono||""}));x(n),s(!1)}},800)}catch(r){s(!1),console.error(r),o.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},C=async r=>{try{const t=await f.get(route("catalogos.detalle.cliente.asc",{id:r})),{status:c,data:n}=t;c===200&&(h(n),p(!0))}catch{o.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de clientes.",life:3e3})}},v=r=>{M({message:`¿Estas seguro de eliminar a : ${r.nombre} ?`,header:"Confirmacion de Eliminar",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>b(r.id),reject:()=>E()})},b=async r=>{s(!0);try{setTimeout(async()=>{const t=await f.delete(`${route("catalogo.eliminar.cliente",{id:r})}`),{data:c,status:n}=t;n===200&&(o.current.show({severity:"success",summary:"Registro Eliminado",detail:"Cliente Eliminado Correctamente",life:3e3}),s(!1),u())},800)}catch{o.current.show({severity:"error",summary:"Error",detail:"No se pudo eliminar el cliente.",life:3e3}),s(!1)}},E=()=>{o.current.show({severity:"warn",summary:"Sin Detalle",detail:"No se modifico ningun registro",life:3e3})};a.useEffect(()=>{u()},[]);const N=r=>e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1 mb-4",children:[e.jsx(g,{icon:"pi pi-eye",rounded:!0,severity:"info","aria-label":"User",onClick:()=>C(r.id)}),e.jsx(g,{icon:"pi pi-times",rounded:!0,severity:"danger","aria-label":"Cancel",onClick:()=>v(r),tooltip:"Eliminar",tooltipOptions:{position:"left"}})]});return e.jsxs("div",{className:"col-12",children:[e.jsx(S,{reloadRegistros:u,mostrarModal:y,setMostrarModal:p,registro:j}),e.jsxs("div",{className:"card",children:[d&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(P,{})}),d===!1&&m.length>0&&e.jsxs(w,{value:m,tableStyle:{minWidth:"50rem"},children:[e.jsx(l,{field:"nombre",header:"Nombre"}),e.jsx(l,{field:"numeroProvedor",header:"Num. Provedor"}),e.jsx(l,{field:"email",header:"Correo"}),e.jsx(l,{field:"telefono",header:"Teléfono"}),e.jsx(l,{field:"opciones",header:"Opciones",body:N})]}),d===!1&&m.length===0&&e.jsx(R,{severity:"info",text:"No existen registros suficientes"})]}),e.jsx(T,{ref:o}),e.jsx(D,{})]})};export{te as default};
