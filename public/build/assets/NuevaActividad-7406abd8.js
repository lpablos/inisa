import{r as s,j as e,a as O}from"./app-6c82f11e.js";import{B as F}from"./button.esm-41370389.js";import{D as V}from"./dialog.esm-1817fed8.js";import{E as G}from"./editor.esm-64157026.js";import{I as D}from"./inputtext.esm-637833b0.js";import{D as C}from"./dropdown.esm-afaf7a02.js";import{C as H}from"./calendar.esm-d23b41df.js";import{T as M}from"./toast.esm-8381782e.js";import{P as $}from"./progressspinner.esm-6c0927c0.js";import"./iconbase.esm-c62f15b0.js";import"./index.esm-e44f5f68.js";import"./ripple.esm-79db3f70.js";import"./tooltip.esm-0f28f899.js";import"./csstransition.esm-09727ec9.js";import"./index.esm-366dce1b.js";import"./overlayservice.esm-c4b1edec.js";import"./virtualscroller.esm-cb5beb47.js";import"./index.esm-c60f89d0.js";import"./index.esm-39b5d000.js";const ce=({usuario:T})=>{const[p,f]=s.useState(""),[h,x]=s.useState(""),[b,v]=s.useState(null),[j,N]=s.useState(null),[o,g]=s.useState(null),[I,S]=s.useState(null),[w,y]=s.useState(""),[E,n]=s.useState(!1),[k,c]=s.useState(!1),i=s.useRef(null);s.useEffect(()=>{let a=o?o.toISOString().slice(0,10):null;S(a)},[o]);const A=[{label:"Alta",value:"alta"},{label:"Media",value:"media"},{label:"Baja",value:"baja"}],P=[{label:"Pendiente",value:"pendiente"},{label:"Realizado",value:"realizado"}],[R,u]=s.useState(!1);s.useEffect(()=>{f(T)},[]);const z=()=>{x(""),v(null),N(null),g(null),S(null),y("")},B=({responsable:a,titulo:t,descripcion:l,prioridad:r,estatus:d,fecha:m})=>a?t!=null&&t.trim()?l!=null&&l.trim()?r?d?m?null:"Selecciona una fecha.":"Selecciona un estatus.":"Selecciona una prioridad.":"La descripción es obligatoria.":"El título es obligatorio.":"Debes seleccionar un responsable.",L=async a=>{a.preventDefault();const t={responsable:p,titulo:h,descripcion:w,prioridad:b,estatus:j,fecha:I},l=B(t);if(l){i.current.show({severity:"error",summary:"Error",detail:l,life:3e3});return}u(!0),c(!0);try{const r=await O.post(route("activiades.store"),t),{data:d,status:m}=r;m===200&&(i.current.show({severity:"success",summary:"Success",detail:`${d.success}`,life:3e3}),z(),n(!1),c(!1),setTimeout(()=>{u(!1)},1e3))}catch(r){console.error(r),u(!1),i.current.show({severity:"error",summary:"Error",detail:"Error al registrar la actividad",life:3e3}),c(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx(M,{ref:i}),e.jsx(F,{icon:"pi pi-paperclip",onClick:()=>n(!0),tooltip:"Nueva Actividad",tooltipOptions:{position:"bottom",showDelay:200,hideDelay:300},className:"p-button-rounded p-button-info p-button-sm mr-1"}),e.jsx(V,{header:"Actividad",visible:E,maximizable:!0,style:{width:"50vw"},onHide:()=>{E&&n(!1)},children:e.jsx("form",{action:"",onSubmit:L,children:e.jsxs("div",{className:"flex flex-column gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"responsable",className:"font-bold block mb-2",children:"Responsable"}),e.jsx(D,{id:"responsable",value:p,onChange:a=>f(a.target.value),className:"w-full",placeholder:"Nombre del responsable",readOnly:!0})]}),e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"prioridad",className:"font-bold block mb-2",children:"Prioridad *"}),e.jsx(C,{inputId:"prioridad",value:b,options:A,onChange:a=>v(a.value),placeholder:"Selecciona Prioridad",className:"w-full"})]}),e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"estatus",className:"font-bold block mb-2",children:"Estatus *"}),e.jsx(C,{inputId:"estatus",value:j,options:P,onChange:a=>N(a.value),placeholder:"Selecciona Estatus",className:"w-full"})]}),e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"fecha",className:"font-bold block mb-2",children:"Fecha Limite *"}),e.jsx(H,{inputId:"fecha",value:o,onChange:a=>g(a.value),dateFormat:"dd/mm/yy",className:"w-full",showIcon:!0})]}),e.jsxs("div",{className:"flex-auto min-w-[250px]",children:[e.jsx("label",{htmlFor:"titulo",className:"font-bold block mb-2",children:"Titulo *"}),e.jsx(D,{id:"titulo",value:h,onChange:a=>x(a.target.value),className:"w-full",placeholder:"Nombre de la actividad"})]})]}),e.jsx(G,{value:w,onTextChange:a=>y(a.htmlValue),style:{height:"120px"}}),R&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx($,{})}),e.jsx("div",{className:"flex items-center gap-3 mb-4 p-4",children:e.jsx("div",{className:"ml-auto flex gap-2",children:e.jsx(F,{label:"Guardar",disabled:k})})})]})})})]})};export{ce as default};
//# sourceMappingURL=NuevaActividad-7406abd8.js.map
