import{r as a,j as e,a as u}from"./app-fec1f9ef.js";import{D as w,C as l}from"./column.esm-899b1aad.js";import{B as f}from"./button.esm-51328d7b.js";import R from"./NewClienteDialog-54750401.js";import{T as S}from"./toast.esm-75b1e22d.js";import{P as T}from"./progressspinner.esm-52c670a3.js";import{M as P}from"./message.esm-99876c2c.js";import{C as D,c as M}from"./confirmdialog.esm-0e6d0038.js";import"./ripple.esm-aa678d2b.js";import"./tooltip.esm-6b27fd4f.js";import"./inputnumber.esm-788907ab.js";import"./index.esm-212e446d.js";import"./inputtext.esm-406ddf7e.js";import"./index.esm-0c330de1.js";import"./dropdown.esm-75bb9a6d.js";import"./overlayservice.esm-50b87a58.js";import"./index.esm-e4f82beb.js";import"./index.esm-da5aa072.js";import"./index.esm-cac10fb5.js";import"./index.esm-54f6b121.js";import"./index.esm-0e6a25a9.js";import"./dialog.esm-a65c7f4e.js";import"./fieldset.esm-0982d02e.js";import"./editor.esm-ef975e67.js";const re=()=>{const t=a.useRef(null),[m,x]=a.useState([]),[d,s]=a.useState(!1),[y,g]=a.useState(!1),[h,j]=a.useState(null),p=async()=>{s(!0);try{setTimeout(async()=>{const o=await u.get(route("catalogos.listado.clientes.empresa")),{data:r,status:c}=o;if(c==200){const n=r.map(i=>({id:i.id,nombre:i.abreviacion+" - "+i.nombre,numeroProvedor:i.numeroProvedor||"",email:i.email||"",telefono:i.telefono||""}));x(n),s(!1)}},800)}catch(o){s(!1),console.error(o),t.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},C=async o=>{try{const r=await u.get(route("catalogos.detalle.cliente.asc",{id:o})),{status:c,data:n}=r;c===200&&(j(n),g(!0))}catch{t.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de clientes.",life:3e3})}},v=o=>{M({message:`¿Estas seguro de eliminar a : ${o.nombre} ?`,header:"Confirmacion de Eliminar",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>b(o.id),reject:()=>E()})},b=async o=>{s(!0);try{setTimeout(async()=>{const r=await u.delete(`${route("catalogo.eliminar.cliente",{id:o})}`),{data:c,status:n}=r;n===200&&(t.current.show({severity:"success",summary:"Registro Eliminado",detail:"Cliente Eliminado Correctamente",life:3e3}),s(!1),p())},800)}catch{t.current.show({severity:"error",summary:"Error",detail:"No se pudo eliminar el cliente.",life:3e3}),s(!1)}},E=()=>{t.current.show({severity:"warn",summary:"Sin Detalle",detail:"No se modifico ningun registro",life:3e3})};a.useEffect(()=>{p()},[]);const N=o=>e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1 mb-4",children:[e.jsx(f,{icon:"pi pi-eye",rounded:!0,severity:"info","aria-label":"User",onClick:()=>C(o.id)}),e.jsx(f,{icon:"pi pi-times",rounded:!0,severity:"danger","aria-label":"Cancel",onClick:()=>v(o),tooltip:"Eliminar",tooltipOptions:{position:"left"}})]});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 text-right",children:e.jsx(f,{icon:"pi pi-history",rounded:!0,severity:"help","aria-label":"Regresar Cotizaciones",tooltip:"Regresar Cotizaciones",tooltipOptions:{position:"left"},onClick:()=>window.location.href=route("catalogo.gral.index")})}),e.jsx(R,{reloadRegistros:p,mostrarModal:y,setMostrarModal:g,registro:h}),e.jsxs("div",{className:"card",children:[d&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(T,{})}),d===!1&&m.length>0&&e.jsxs(w,{value:m,tableStyle:{minWidth:"50rem"},children:[e.jsx(l,{field:"nombre",header:"Nombre"}),e.jsx(l,{field:"numeroProvedor",header:"Num. Provedor"}),e.jsx(l,{field:"email",header:"Correo"}),e.jsx(l,{field:"telefono",header:"Teléfono"}),e.jsx(l,{field:"opciones",header:"Opciones",body:N})]}),d===!1&&m.length===0&&e.jsx(P,{severity:"info",text:"No existen registros suficientes"})]}),e.jsx(S,{ref:t}),e.jsx(D,{})]})};export{re as default};
