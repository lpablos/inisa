import{r as a,j as e,a as u}from"./app-6c82f11e.js";import{D as w,C as l}from"./column.esm-a678af90.js";import{B as f}from"./button.esm-41370389.js";import R from"./NewClienteDialog-f00a3e08.js";import{T as S}from"./toast.esm-8381782e.js";import{P as T}from"./progressspinner.esm-6c0927c0.js";import{M as P}from"./message.esm-361cc17e.js";import{C as D,c as M}from"./confirmdialog.esm-d706b79b.js";import"./iconbase.esm-c62f15b0.js";import"./index.esm-e44f5f68.js";import"./ripple.esm-79db3f70.js";import"./inputnumber.esm-83251a88.js";import"./index.esm-ad4d5920.js";import"./inputtext.esm-637833b0.js";import"./tooltip.esm-0f28f899.js";import"./index.esm-971704a7.js";import"./dropdown.esm-afaf7a02.js";import"./overlayservice.esm-c4b1edec.js";import"./index.esm-366dce1b.js";import"./csstransition.esm-09727ec9.js";import"./virtualscroller.esm-cb5beb47.js";import"./index.esm-c60f89d0.js";import"./index.esm-7f14e7bd.js";import"./index.esm-39b5d000.js";import"./index.esm-86191ea3.js";import"./dialog.esm-1817fed8.js";import"./fieldset.esm-3c09dac3.js";import"./editor.esm-64157026.js";const ae=()=>{const t=a.useRef(null),[m,x]=a.useState([]),[d,i]=a.useState(!1),[y,g]=a.useState(!1),[h,j]=a.useState(null),p=async()=>{i(!0);try{setTimeout(async()=>{const o=await u.get(route("catalogos.listado.clientes.empresa")),{data:r,status:c}=o;if(c==200){const n=r.map(s=>({id:s.id,nombre:s.abreviacion+" - "+s.nombre,numeroProvedor:s.numeroProvedor||"",email:s.email||"",telefono:s.telefono||""}));x(n),i(!1)}},800)}catch(o){i(!1),console.error(o),t.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},C=async o=>{try{const r=await u.get(route("catalogos.detalle.cliente.asc",{id:o})),{status:c,data:n}=r;c===200&&(j(n),g(!0))}catch{t.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de clientes.",life:3e3})}},v=o=>{M({message:`¿Estas seguro de eliminar a : ${o.nombre} ?`,header:"Confirmacion de Eliminar",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>b(o.id),reject:()=>E()})},b=async o=>{i(!0);try{setTimeout(async()=>{const r=await u.delete(`${route("catalogo.eliminar.cliente",{id:o})}`),{data:c,status:n}=r;n===200&&(t.current.show({severity:"success",summary:"Registro Eliminado",detail:"Cliente Eliminado Correctamente",life:3e3}),i(!1),p())},800)}catch{t.current.show({severity:"error",summary:"Error",detail:"No se pudo eliminar el cliente.",life:3e3}),i(!1)}},E=()=>{t.current.show({severity:"warn",summary:"Sin Detalle",detail:"No se modifico ningun registro",life:3e3})};a.useEffect(()=>{p()},[]);const N=o=>e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1 mb-4",children:[e.jsx(f,{icon:"pi pi-eye",rounded:!0,severity:"info","aria-label":"User",onClick:()=>C(o.id)}),e.jsx(f,{icon:"pi pi-times",rounded:!0,severity:"danger","aria-label":"Cancel",onClick:()=>v(o),tooltip:"Eliminar",tooltipOptions:{position:"left"}})]});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 text-right",children:e.jsx(f,{icon:"pi pi-history",rounded:!0,severity:"help","aria-label":"Regresar Cotizaciones",tooltip:"Regresar Cotizaciones",tooltipOptions:{position:"left"},onClick:()=>window.location.href=route("catalogo.gral.index")})}),e.jsx(R,{reloadRegistros:p,mostrarModal:y,setMostrarModal:g,registro:h}),e.jsxs("div",{className:"card",children:[d&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(T,{})}),d===!1&&m.length>0&&e.jsxs(w,{value:m,tableStyle:{minWidth:"50rem"},children:[e.jsx(l,{field:"nombre",header:"Nombre"}),e.jsx(l,{field:"numeroProvedor",header:"Num. Provedor"}),e.jsx(l,{field:"email",header:"Correo"}),e.jsx(l,{field:"telefono",header:"Teléfono"}),e.jsx(l,{field:"opciones",header:"Opciones",body:N})]}),d===!1&&m.length===0&&e.jsx(P,{severity:"info",text:"No existen registros suficientes"})]}),e.jsx(S,{ref:t}),e.jsx(D,{})]})};export{ae as default};
//# sourceMappingURL=TablaClientes-4c8f3c52.js.map
