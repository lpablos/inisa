import{r as s,j as e,a as i}from"./app-f5b48f30.js";import{B as u}from"./button.esm-9f4ba889.js";import{D as J}from"./dialog.esm-1c04613c.js";import{P as K}from"./progressspinner.esm-5fc3a8a1.js";import{I as D}from"./inputtext.esm-c0ceb7aa.js";import{D as m}from"./dropdown.esm-794b1ea8.js";import{C as B}from"./calendar.esm-a8385e10.js";import"./iconbase.esm-a910649f.js";import"./index.esm-88cead70.js";import"./ripple.esm-32b7924c.js";import"./tooltip.esm-f1d08006.js";import"./csstransition.esm-678c9b82.js";import"./index.esm-a2a5ba18.js";import"./overlayservice.esm-5e43e3fd.js";import"./index.esm-5803aef1.js";import"./virtualscroller.esm-13f4a162.js";import"./index.esm-59c9c344.js";import"./index.esm-1cd2ea59.js";const de=({resultadosBusqueda:I})=>{const r=s.useRef(null),[b,n]=s.useState(!1),[T,L]=s.useState([]),[$,A]=s.useState([]),[O,q]=s.useState([]),[p,c]=s.useState(!1),[h,d]=s.useState(!1),[f,x]=s.useState(""),[v,j]=s.useState(""),[C,N]=s.useState(null),[g,y]=s.useState(null),[w,F]=s.useState(null),[S,E]=s.useState(""),[z,k]=s.useState(""),R=async()=>{try{const a=await i.get(route("catalogo.list.clientes")),{data:o}=a,l=o.map(t=>({id:t.id,nombre:`${t.abreviacion} - ${t.nombre}`,abreviacion:t.abreviacion}));L(l)}catch{r.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de clientes.",life:3e3})}},H=async()=>{try{const a=await i.get(route("catalogo.list.status")),{data:o}=a,l=o.map(t=>({id:t.id,nombre:t.nombre,abreviacion:t.abreviacion,descripcion:`${t.abreviacion} : ${t.descripcion}`}));A(l)}catch{r.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de statuses.",life:3e3})}},V=async()=>{try{const a=await i.get(route("catalogo.list.prioridades")),{data:o}=a;q(o)}catch{r.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de prioridades.",life:3e3})}},G=async()=>{c(!0),d(!0);const a={cotizacion:f,titulo:v,cliente:C,estatus:g,fechaInicial:S,fechaFinal:z,prioridad:w};try{const o=await i.post(route("buscador.cotizaciones.list"),a),{data:l}=o;I(l),P(),n(!1),setTimeout(()=>{c(!1),d(!1)},800)}catch{r.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de statuses.",life:3e3}),c(!1),d(!1)}},P=()=>{x(""),j(""),N(null),y(null),F(null),E(""),k("")};return s.useEffect(()=>{R(),H(),V()},[]),e.jsxs("div",{className:"flex justify-content-center ml-2",children:[e.jsx(u,{icon:"pi pi-search-plus",tooltip:"Búsqueda avanzada",tooltipOptions:{showDelay:100,hideDelay:300},rounded:!0,onClick:()=>n(!0)}),e.jsx(J,{header:"Buscador Avanzado",visible:b,maximizable:!0,style:{width:"50vw"},onHide:()=>{b&&n(!1)},children:e.jsxs("div",{className:"card",children:[p===!1&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"Cotización",className:"font-bold block mb-2",children:"Cotización"}),e.jsx(D,{value:f,onChange:a=>x(a.target.value)})]}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"Titulo",className:"font-bold block mb-2",children:"Titulo"}),e.jsx(D,{value:v,onChange:a=>j(a.target.value)})]}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"Cliente",className:"font-bold block mb-2",children:"Cliente"}),e.jsx(m,{value:C,onChange:a=>N(a.value),options:T,optionLabel:"nombre",placeholder:"Seleciona el Cliente",className:"w-full md:w-14rem"})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"Estatus",className:"font-bold block mb-2",children:"Estatus"}),e.jsx(m,{value:g,onChange:a=>y(a.value),options:$,optionLabel:"descripcion",placeholder:"Seleciona Cliente",className:"w-full md:w-14rem"})]}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"Prioridad",className:"font-bold block mb-2",children:"Prioridad"}),e.jsx(m,{value:w,onChange:a=>F(a.value),options:O,optionLabel:"nombre",placeholder:"Seleciona Prioridad",className:"w-full md:w-14rem"})]}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"Fecha Inicial",className:"font-bold block mb-2",children:"Fecha Inicial"}),e.jsx(B,{value:S,onChange:a=>E(a.value)})]}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"Fecha Final",className:"font-bold block mb-2",children:"Fecha Final"}),e.jsx(B,{value:z,onChange:a=>k(a.value)})]})]})]}),p===!0&&e.jsx("div",{className:"card flex justify-content-center",children:e.jsx(K,{})}),e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1",children:[e.jsx(u,{label:"Limpiar",severity:"info",onClick:()=>P(),disabled:h}),e.jsx(u,{label:"Buscar",severity:"info",onClick:()=>G(),disabled:h})]})]})})]})};export{de as default};
//# sourceMappingURL=BusquedaAvanzadaCotizacion-36d1a5e2.js.map
