import{r as t,j as e,a as L}from"./app-a53c6d67.js";import{D as P}from"./datatable.esm-57f9a344.js";import{C as i}from"./column.esm-ed9a5ea1.js";import{C as V}from"./confirmdialog.esm-5f6058a4.js";import{T as Y}from"./toast.esm-f97787cf.js";import{B as q}from"./button.esm-3069fb79.js";import{p as J}from"./purify.es-851ec8c9.js";import"./ripple.esm-30788c76.js";import"./tooltip.esm-1533f36e.js";import"./inputnumber.esm-f9f44864.js";import"./index.esm-94aabc8e.js";import"./inputtext.esm-073ef6be.js";import"./index.esm-5ca4f75a.js";import"./dropdown.esm-a3b7d4d7.js";import"./overlayservice.esm-dbb0b4ec.js";import"./index.esm-f432c0c3.js";import"./index.esm-765e4459.js";import"./index.esm-e8c63afb.js";import"./index.esm-db8265bd.js";import"./index.esm-332f4df9.js";import"./dialog.esm-2dcf3964.js";const jo=({listadoConceptos:n=[],totalesAsc:p=0,seleccionTomo:a,perteneceTomo:c,capturaTomo:l,identyCotizacion:d,setVisibleModal:x,setConceptoInput:_,setReloadList:h,setRegistros:j})=>{const[g,m]=t.useState([]),[K,f]=t.useState([]),[b,u]=t.useState(!1),r=t.useRef(null),[C,y]=t.useState(null),[S,T]=t.useState(null),[v,F]=t.useState(null),[E,M]=t.useState(null),[z,O]=t.useState(null);t.useEffect(()=>{m(n),f(p)},[n]),t.useEffect(()=>{y(a),T(c),F(l),O(d)},[a,c,l,d]);const R=o=>{const{id:s}=o;M(s),u(!0)},k=()=>{_(""),m([]),j([])},I=async()=>{try{const o={identyCotizacion:z,identyConcepto:E,selecTomo:C,pertTomo:S,captTomo:v},s=await L.post(`${route("asociar.concepto.generales")}`,o),{data:Q,success:G}=s.data;s.status==201&&(k(),h(!0),r.current.show({severity:"info",summary:"Confirmed",detail:`${G}`,life:3e3}),setTimeout(()=>{x(!1)},3500)),console.log("Esta es la respues",s)}catch{alert("Error")}},N=()=>{I()},A=()=>{r.current.show({severity:"warn",summary:"Rejected",detail:"You have rejected",life:3e3})},B=o=>e.jsx("div",{className:"flex gap-2",children:e.jsx(q,{severity:"success",size:"small",icon:"pi pi-check-circle",tooltip:"Agregar",tooltipOptions:{position:"bottom",showDelay:200,hideDelay:300},className:"p-button-rounded p-button-info p-button-sm",onClick:()=>R(o)})}),H=o=>e.jsxs("ul",{children:[o.costo_material_cantidad&&e.jsxs("li",{children:[e.jsx("strong",{children:"Cantidad:"})," ",o.costo_material_cantidad]}),o.costo_material_unitario_sugerido&&e.jsxs("li",{children:[e.jsx("strong",{children:"Costo Sugerido:"})," ",o.costo_material_unitario_sugerido.toFixed(2)," ",o.moneda]}),o.costo_material_unitario&&e.jsxs("li",{children:[e.jsx("strong",{children:"Costo:"})," ",o.costo_material_unitario.toFixed(2)," ",o.moneda]}),o.costo_material_subtotal&&e.jsxs("li",{children:[e.jsx("strong",{children:"Costo Subtotal:"})," ",o.costo_material_subtotal.toFixed(2)," ",o.moneda]})]}),U=o=>e.jsxs("ul",{children:[o.costo_mano_obra_unitario_sugerido&&e.jsxs("li",{children:[e.jsx("strong",{children:"Costo Unitario Sugerido:"})," ",o.costo_mano_obra_unitario_sugerido.toFixed(2)," ",o.moneda]}),o.costo_mano_obra_unitario&&e.jsxs("li",{children:[e.jsx("strong",{children:"Costo Unitario:"})," ",o.costo_mano_obra_unitario.toFixed(2)," ",o.moneda]}),o.costo_mano_obra_unitario_sugerido&&e.jsxs("li",{children:[e.jsx("strong",{children:"Subtotal:"})," ",o.costo_mano_obra_unitario_sugerido.toFixed(2)," ",o.moneda]}),o.obra_material_subtotal&&e.jsxs("li",{children:[e.jsx("strong",{children:"M.O./MATER. Subtotal:"})," ",o.obra_material_subtotal.toFixed(2)," ",o.moneda]})]}),$=o=>e.jsx("div",{dangerouslySetInnerHTML:{__html:J.sanitize(o.descripcion)}});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"card",children:[e.jsxs(P,{value:g,size:"small",paginator:!0,rows:5,children:[e.jsx(i,{field:"descripcion",header:"Descripción",style:{width:"50%"},body:$}),e.jsx(i,{field:"name",header:"Material",body:H}),e.jsx(i,{field:"category",header:"Mano de Obra",body:U}),e.jsx(i,{field:"opciones",header:"Opción",body:B})]}),e.jsx(Y,{ref:r}),e.jsx(V,{group:"declarative",visible:b,onHide:()=>u(!1),message:"¿Estas seguro de agregar este concepto?",header:"Confirmación",icon:"pi pi-exclamation-triangle",accept:N,reject:A,breakpoints:{"1100px":"75vw","960px":"100vw"}})]})})};export{jo as default};
