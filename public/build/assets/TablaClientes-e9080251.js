import{r as a,j as e,a as u}from"./app-dcb6f552.js";import{D as w,C as l}from"./column.esm-212fd85e.js";import{B as f}from"./button.esm-46e694e9.js";import R from"./NewClienteDialog-bc67e901.js";import{T as S}from"./toast.esm-b4d4ac55.js";import{P as T}from"./progressspinner.esm-67f32af2.js";import{M as P}from"./message.esm-2c2b0b53.js";import{C as D,c as M}from"./confirmdialog.esm-7f1ebc12.js";import"./componentbase.esm-1becf919.js";import"./iconbase.esm-565044fd.js";import"./index.esm-caaa0bd1.js";import"./ripple.esm-bef0a74b.js";import"./inputnumber.esm-b35cac15.js";import"./index.esm-a09854cd.js";import"./inputtext.esm-21a8a940.js";import"./tooltip.esm-3383bdb1.js";import"./index.esm-e233148e.js";import"./dropdown.esm-e750cd64.js";import"./index.esm-727a66c6.js";import"./index.esm-c88ad067.js";import"./csstransition.esm-4d025c04.js";import"./virtualscroller.esm-572a5462.js";import"./index.esm-bc560454.js";import"./index.esm-26c769ed.js";import"./index.esm-d80e96df.js";import"./index.esm-4dd38ef7.js";import"./dialog.esm-84a5e061.js";import"./fieldset.esm-1a01d11e.js";import"./editor.esm-330fbb63.js";const ne=()=>{const t=a.useRef(null),[m,x]=a.useState([]),[d,i]=a.useState(!1),[y,g]=a.useState(!1),[h,j]=a.useState(null),p=async()=>{i(!0);try{setTimeout(async()=>{const o=await u.get(route("catalogos.listado.clientes.empresa")),{data:r,status:c}=o;if(c==200){const n=r.map(s=>({id:s.id,nombre:s.abreviacion+" - "+s.nombre,numeroProvedor:s.numeroProvedor||"",email:s.email||"",telefono:s.telefono||""}));x(n),i(!1)}},800)}catch(o){i(!1),console.error(o),t.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},C=async o=>{try{const r=await u.get(route("catalogos.detalle.cliente.asc",{id:o})),{status:c,data:n}=r;c===200&&(j(n),g(!0))}catch{t.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de clientes.",life:3e3})}},v=o=>{M({message:`¿Estas seguro de eliminar a : ${o.nombre} ?`,header:"Confirmacion de Eliminar",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>b(o.id),reject:()=>E()})},b=async o=>{i(!0);try{setTimeout(async()=>{const r=await u.delete(`${route("catalogo.eliminar.cliente",{id:o})}`),{data:c,status:n}=r;n===200&&(t.current.show({severity:"success",summary:"Registro Eliminado",detail:"Cliente Eliminado Correctamente",life:3e3}),i(!1),p())},800)}catch{t.current.show({severity:"error",summary:"Error",detail:"No se pudo eliminar el cliente.",life:3e3}),i(!1)}},E=()=>{t.current.show({severity:"warn",summary:"Sin Detalle",detail:"No se modifico ningun registro",life:3e3})};a.useEffect(()=>{p()},[]);const N=o=>e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1 mb-4",children:[e.jsx(f,{icon:"pi pi-eye",rounded:!0,severity:"info","aria-label":"User",onClick:()=>C(o.id)}),e.jsx(f,{icon:"pi pi-times",rounded:!0,severity:"danger","aria-label":"Cancel",onClick:()=>v(o),tooltip:"Eliminar",tooltipOptions:{position:"left"}})]});return e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 text-right",children:e.jsx(f,{icon:"pi pi-history",rounded:!0,severity:"help","aria-label":"Regresar Cotizaciones",tooltip:"Regresar Cotizaciones",tooltipOptions:{position:"left"},onClick:()=>window.location.href=route("catalogo.gral.index")})}),e.jsx(R,{reloadRegistros:p,mostrarModal:y,setMostrarModal:g,registro:h}),e.jsxs("div",{className:"card",children:[d&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(T,{})}),d===!1&&m.length>0&&e.jsxs(w,{value:m,tableStyle:{minWidth:"50rem"},children:[e.jsx(l,{field:"nombre",header:"Nombre"}),e.jsx(l,{field:"numeroProvedor",header:"Num. Provedor"}),e.jsx(l,{field:"email",header:"Correo"}),e.jsx(l,{field:"telefono",header:"Teléfono"}),e.jsx(l,{field:"opciones",header:"Opciones",body:N})]}),d===!1&&m.length===0&&e.jsx(P,{severity:"info",text:"No existen registros suficientes"})]}),e.jsx(S,{ref:t}),e.jsx(D,{})]})};export{ne as default};
//# sourceMappingURL=TablaClientes-e9080251.js.map
