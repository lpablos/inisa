import{r as a,j as e,a as p}from"./app-a53c6d67.js";import{D as w}from"./datatable.esm-57f9a344.js";import{C as l}from"./column.esm-ed9a5ea1.js";import{B as g}from"./button.esm-3069fb79.js";import S from"./NewClienteDialog-213f1516.js";import{T}from"./toast.esm-f97787cf.js";import{P}from"./progressspinner.esm-0c33138d.js";import{M as R}from"./message.esm-90d0009c.js";import{C as D,c as M}from"./confirmdialog.esm-5f6058a4.js";import"./ripple.esm-30788c76.js";import"./tooltip.esm-1533f36e.js";import"./inputnumber.esm-f9f44864.js";import"./index.esm-94aabc8e.js";import"./inputtext.esm-073ef6be.js";import"./index.esm-5ca4f75a.js";import"./dropdown.esm-a3b7d4d7.js";import"./overlayservice.esm-dbb0b4ec.js";import"./index.esm-f432c0c3.js";import"./index.esm-765e4459.js";import"./index.esm-e8c63afb.js";import"./index.esm-db8265bd.js";import"./index.esm-332f4df9.js";import"./dialog.esm-2dcf3964.js";import"./fieldset.esm-5b494526.js";import"./editor.esm-7036d5ce.js";const oe=()=>{const o=a.useRef(null),[m,x]=a.useState([]),[d,s]=a.useState(!1),[y,u]=a.useState(!1),[j,h]=a.useState(null),f=async()=>{s(!0);try{setTimeout(async()=>{const r=await p.get(route("catalogos.listado.clientes.empresa")),{data:t,status:c}=r;if(c==200){const n=t.map(i=>({id:i.id,nombre:i.abreviacion+" - "+i.nombre,numeroProvedor:i.numeroProvedor||"",email:i.email||"",telefono:i.telefono||""}));x(n),s(!1)}},800)}catch(r){s(!1),console.error(r),o.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},C=async r=>{try{const t=await p.get(route("catalogos.detalle.cliente.asc",{id:r})),{status:c,data:n}=t;c===200&&(h(n),u(!0))}catch{o.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de clientes.",life:3e3})}},v=r=>{M({message:`¿Estas seguro de eliminar a : ${r.nombre} ?`,header:"Confirmacion de Eliminar",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>b(r.id),reject:()=>E()})},b=async r=>{s(!0);try{setTimeout(async()=>{const t=await p.delete(`${route("catalogo.eliminar.cliente",{id:r})}`),{data:c,status:n}=t;n===200&&(o.current.show({severity:"success",summary:"Registro Eliminado",detail:"Cliente Eliminado Correctamente",life:3e3}),s(!1),f())},800)}catch{o.current.show({severity:"error",summary:"Error",detail:"No se pudo eliminar el cliente.",life:3e3}),s(!1)}},E=()=>{o.current.show({severity:"warn",summary:"Sin Detalle",detail:"No se modifico ningun registro",life:3e3})};a.useEffect(()=>{f()},[]);const N=r=>e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1 mb-4",children:[e.jsx(g,{icon:"pi pi-eye",rounded:!0,severity:"info","aria-label":"User",onClick:()=>C(r.id)}),e.jsx(g,{icon:"pi pi-times",rounded:!0,severity:"danger","aria-label":"Cancel",onClick:()=>v(r),tooltip:"Eliminar",tooltipOptions:{position:"left"}})]});return e.jsxs("div",{className:"col-12",children:[e.jsx(S,{reloadRegistros:f,mostrarModal:y,setMostrarModal:u,registro:j}),e.jsxs("div",{className:"card",children:[d&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(P,{})}),d===!1&&m.length>0&&e.jsxs(w,{value:m,tableStyle:{minWidth:"50rem"},children:[e.jsx(l,{field:"nombre",header:"Nombre"}),e.jsx(l,{field:"numeroProvedor",header:"Num. Provedor"}),e.jsx(l,{field:"email",header:"Correo"}),e.jsx(l,{field:"telefono",header:"Teléfono"}),e.jsx(l,{field:"opciones",header:"Opciones",body:N})]}),d===!1&&m.length===0&&e.jsx(R,{severity:"info",text:"No existen registros suficientes"})]}),e.jsx(T,{ref:o}),e.jsx(D,{})]})};export{oe as default};
