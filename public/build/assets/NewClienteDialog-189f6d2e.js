import{r as s,j as e,a as H}from"./app-954e5f69.js";import{B as V}from"./button.esm-9fdd79ba.js";import{D as ee}from"./dialog.esm-9ecdf0e6.js";import{I as o}from"./inputtext.esm-0428364e.js";import{F as A}from"./fieldset.esm-06a343b0.js";import{E as $}from"./editor.esm-c48e70ce.js";import{T as ae}from"./toast.esm-6e989c17.js";import{P as se}from"./progressspinner.esm-cdabcb6e.js";import"./ripple.esm-80139cd0.js";import"./tooltip.esm-705f6f13.js";import"./index.esm-d0f281b3.js";import"./index.esm-e45aff0a.js";import"./index.esm-8e62f4d7.js";const he=({reloadRegistros:R,mostrarModal:O,setMostrarModal:G,registro:L})=>{const i=s.useRef(null),[m,l]=s.useState(!1),[M,r]=s.useState(!1),[q,u]=s.useState(!1),[f,B]=s.useState(null),[x,v]=s.useState(""),[h,b]=s.useState(""),[j,p]=s.useState(""),[g,N]=s.useState(""),[C,y]=s.useState(""),[S,F]=s.useState(""),[w,k]=s.useState(""),[E,I]=s.useState(""),[P,D]=s.useState(""),[T,z]=s.useState(""),J=async()=>{r(!0);const a={nombre:x,abreviacion:h,direccion:j,telefono:g,email:C,numeroProvedor:w,destinatario:E,mensajeAfectivo:S,mensajeVigencia:P,comentarioObservacion:T};try{const t=await H.post(route("catalogo.registrar.cliente.nuevo"),a);console.log("Esto devuelve",t);const{data:n,status:c}=t;c===200&&(i.current.show({severity:"success",summary:"Success",detail:`${n.success}`,life:3e3}),d(),l(!1),R(),setTimeout(()=>{r(!1)},1e3))}catch(t){console.error(t),r(!1),i.current.show({severity:"error",summary:"Error",detail:"No se puede almacenar el cliente.. Intenta de nuevo",life:3e3})}},K=async()=>{const a={identy:f,nombre:x,abreviacion:h,direccion:j,telefono:g,email:C,numeroProvedor:w,destinatario:E,mensajeAfectivo:S,mensajeVigencia:P,comentarioObservacion:T};try{const t=await H.post(route("catalogo.actualizar.cliente.nuevo"),a),{data:n,status:c}=t;c===200&&(i.current.show({severity:"success",summary:"Success",detail:`${n.success}`,life:3e3}),d(),l(!1),R(),setTimeout(()=>{r(!1)},1e3))}catch(t){console.error(t),r(!1),i.current.show({severity:"error",summary:"Error",detail:"No se puede almacenar el cliente.. Intenta de nuevo",life:3e3})}},d=()=>{B(null),v(""),b(""),p(""),N(""),y(""),F(""),k(""),I(""),D(""),z("")};return s.useEffect(()=>{O?(l(!0),u(!0),setTimeout(()=>{const{abreviacion:a,comentarioObservacion:t,destinatario:n,direccion:c,email:Q,id:U,mensajeAfectivo:W,mensajeVigencia:X,nombre:Y,numeroProvedor:Z,telefono:_}=L;B(U),v(Y),b(a),p(c),N(_),y(Q),F(W),k(Z),I(n),D(X),z(t),u(!1)},1e3)):(l(!1),u(!1))},[O]),s.useEffect(()=>{m?d():G(!1)},[m]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-right gap-2",children:e.jsx(V,{className:"m-1",icon:"pi pi-plus",rounded:!0,severity:"info","aria-label":"Favorite",tooltip:"Nuevo Registro",tooltipOptions:{position:"left"},onClick:()=>l(!0)})}),e.jsx("div",{className:"flex justify-content-center",children:e.jsxs(ee,{header:"Cliente",visible:m,maximizable:!0,style:{width:"80vw"},onHide:()=>{m&&l(!1)},children:[q&&e.jsx("div",{className:" flex justify-content-center",children:e.jsx(se,{})}),e.jsxs(A,{legend:"Datos Generales",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 p-fluid",children:[e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"razonSocial",className:"font-bold block mb-2",children:"RazonSocial (Nombre)"}),e.jsx(o,{inputId:"razonSocial",value:x,onChange:a=>v(a.target.value)})]}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"nombreComercial",className:"font-bold block mb-2",children:"Nombre Comercial"}),e.jsx(o,{inputId:"nombreComercial",value:h,onChange:a=>b(a.target.value)})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3 p-fluid mt-2",children:[e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"direccion",className:"font-bold block mb-2",children:"Dirección"}),e.jsx(o,{inputId:"direccion",value:j,onChange:a=>p(a.target.value)})]}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"telefono",className:"font-bold block mb-2",children:"Teléfono"}),e.jsx(o,{inputId:"telefono",value:g,onChange:a=>N(a.target.value)})]}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"email",className:"font-bold block mb-2",children:"Correo Electronico"}),e.jsx(o,{inputId:"email",value:C,onChange:a=>y(a.target.value)})]})]})]}),e.jsxs(A,{legend:"Cabecera PDF, Excel",className:"mt-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-3 p-fluid",children:[e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"numeroProvedor",className:"font-bold block mb-2",children:"Numero de Provedor"}),e.jsx(o,{inputId:"numeroProvedor",value:w,onChange:a=>k(a.target.value)})]}),e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"destinatario",className:"font-bold block mb-2",children:"Destinatario(Nombre)"}),e.jsx(o,{inputId:"destinatario",value:E,onChange:a=>I(a.target.value)})]})]}),e.jsx("div",{className:"flex flex-wrap gap-3 p-fluid mt-5",children:e.jsxs("div",{className:"flex-auto ",children:[e.jsx("label",{htmlFor:"msnAfectivo",className:"font-bold block mb-2",children:"Mensaje Afectivo"}),e.jsx($,{value:S,onTextChange:a=>F(a.htmlValue),style:{height:"80px"}})]})})]}),e.jsxs(A,{legend:"Pie Pagina PDF, Excel",className:"mt-3",children:[e.jsx("div",{className:"flex flex-wrap gap-3 p-fluid",children:e.jsxs("div",{className:"flex-auto",children:[e.jsx("label",{htmlFor:"vigenciaMsj",className:"font-bold block mb-2",children:"Mnesaje Vigencia"}),e.jsx(o,{inputId:"vigenciaMsj",value:P,onChange:a=>D(a.target.value)})]})}),e.jsx("div",{className:"flex flex-wrap gap-3 p-fluid mt-5",children:e.jsxs("div",{className:"flex-auto ",children:[e.jsx("label",{htmlFor:"observacionComentario",className:"font-bold block mb-2",children:"Comentarios Observación"}),e.jsx($,{value:T,onTextChange:a=>z(a.htmlValue),style:{height:"80px"}})]})})]}),e.jsxs("div",{className:"card flex justify-content-center gap-2",children:[e.jsx(V,{label:f===null?"Registrar":"Actualizar",icon:"pi pi-check",disabled:M,onClick:()=>{f===null?J():K()}}),e.jsx(V,{label:"Limpiar Formulario",icon:"pi pi-refresh",disabled:M,onClick:()=>d()})]})]})}),e.jsx(ae,{ref:i})]})};export{he as default};
