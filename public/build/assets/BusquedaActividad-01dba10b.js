import{r as t,j as a}from"./app-19db06cb.js";import{D as x}from"./dropdown.esm-5f54d0b4.js";import{C as w}from"./calendar.esm-94497439.js";import{B as _}from"./button.esm-8dbecc90.js";import"./iconbase.esm-8ede90bc.js";import"./overlayservice.esm-1e88b1a3.js";import"./index.esm-19bb07b4.js";import"./index.esm-e985f2f4.js";import"./index.esm-a014419b.js";import"./tooltip.esm-01d8262e.js";import"./csstransition.esm-dcf34adf.js";import"./virtualscroller.esm-3b43f60c.js";import"./ripple.esm-586a3f44.js";import"./index.esm-2b3c0470.js";import"./index.esm-87540949.js";import"./inputtext.esm-06be2f11.js";const le=t.forwardRef(({setRegistros:g,setPaginaActual:j,setPerPage:v,setTotal:N},F)=>{const[I,y]=t.useState([]),[o,D]=t.useState(new Date),[l,C]=t.useState(new Date),[P,i]=t.useState(!1),[E,T]=t.useState({selectPersona:{name:"Todos",code:"*"},fecha1:new Date().toISOString().slice(0,10),fecha2:new Date().toISOString().slice(0,10),selectedPrioridad:null,selectedStatus:null}),[c,B]=t.useState({name:"Todos",code:"*"}),[r,S]=t.useState(null),[d,b]=t.useState(null),[u,O]=t.useState({name:"Todas",code:"*"}),[m,k]=t.useState({name:"Todos",code:"*"});t.useEffect(()=>{U(),L(),setTimeout(async()=>{const e={page:1,selectPersona:c,fecha1:r===null?new Date().toISOString().slice(0,10):r,fecha2:d===null?new Date().toISOString().slice(0,10):d,selectedPrioridad:u,selectedStatus:m};await p(e)},1e3)},[]);const L=()=>{S(new Date),b(new Date)};t.useEffect(()=>{if(o){let e=o?o.toISOString().slice(0,10):null;S(e)}if(l){let e=l?l.toISOString().slice(0,10):null;b(e)}},[o,l]);const U=async()=>{try{setTimeout(async()=>{const e=await axios.get(route("listado.catalogos.detalle.usuarios")),{data:s,status:f}=e;if(f==200){const h=[{name:"Todos",code:"*"},...s.map(n=>({code:n.id,name:n.name}))];y(h)}},800)}catch{toast.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},R=[{name:"Todos",code:"*"},{name:"Pendiente",code:"Pendiente"},{name:"Realizado",code:"Realizado"}],A=[{name:"Todas",code:"*"},{name:"Baja",code:"Baja"},{name:"Media",code:"Media"},{name:"Alta",code:"Alta"}],q=async e=>{e.preventDefault();const s={selectPersona:c,fecha1:r,fecha2:d,selectedPrioridad:u,selectedStatus:m};T(s),await p({...s,page:1})},p=async e=>{i(!0);try{const s=await axios.get(route("busqueda.actividades"),{params:e});console.log("Esto es",s);const{status:f}=s;if(f===200){const{data:h,current_page:n,per_page:z,total:M}=s.data;g(h),j(n),v(z),N(M),i(!1)}}catch(s){console.error(s),i(!1),alert("Error")}};return t.useImperativeHandle(F,()=>({reloadListado(e=1){const s={...E,page:e};p(s)}})),a.jsx("div",{className:"card",children:a.jsxs("form",{action:"",onSubmit:q,children:[a.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[a.jsxs("div",{className:"flex-auto min-w-[250px]",children:[a.jsx("label",{htmlFor:"usuario",className:"font-bold block mb-2",children:"Usuario"}),a.jsx(x,{inputId:"usuario",value:c,onChange:e=>B(e.value),options:I,optionLabel:"name",placeholder:"Selecciona Usuario",className:"w-full"})]}),a.jsxs("div",{className:"flex-auto min-w-[250px]",children:[a.jsx("label",{htmlFor:"estatus",className:"font-bold block mb-2",children:"Estatus"}),a.jsx(x,{inputId:"prioridad",value:m,onChange:e=>k(e.value),options:R,optionLabel:"name",placeholder:"Selecciona Estatus",className:"w-full"})]}),a.jsxs("div",{className:"flex-auto min-w-[250px]",children:[a.jsx("label",{htmlFor:"prioridad",className:"font-bold block mb-2",children:"Prioridad"}),a.jsx(x,{inputId:"estatus",value:u,onChange:e=>O(e.value),options:A,optionLabel:"name",placeholder:"Selecciona Prioridad",className:"w-full"})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[a.jsxs("div",{className:"flex-auto min-w-[250px]",children:[a.jsx("label",{htmlFor:"fechainicio",className:"font-bold block mb-2",children:"Fecha inicio"}),a.jsx(w,{inputId:"fechainicio",value:o,onChange:e=>D(e.value),dateFormat:"dd/mm/yy",className:"w-full",showIcon:!0})]}),a.jsxs("div",{className:"flex-auto min-w-[250px]",children:[a.jsx("label",{htmlFor:"fechafin",className:"font-bold block mb-2",children:"Fecha fin"}),a.jsx(w,{inputId:"fechafin",value:l,onChange:e=>C(e.value),dateFormat:"dd/mm/yy",className:"w-full",showIcon:!0})]}),a.jsx("div",{className:"min-w-[250px]  items-end p-4",children:a.jsx(_,{label:"Buscar",loading:P})})]})]})})});export{le as default};
//# sourceMappingURL=BusquedaActividad-01dba10b.js.map
