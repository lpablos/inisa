import{r as a,j as e,a as f}from"./app-827613ca.js";import{D as w,C as l}from"./column.esm-b20e1b3d.js";import{B as g}from"./button.esm-0df79c86.js";import S from"./NewClienteDialog-31066c75.js";import{T}from"./toast.esm-fe7981d5.js";import{P}from"./progressspinner.esm-c5b83609.js";import{M as R}from"./message.esm-aba0ff08.js";import{C as D,c as M}from"./confirmdialog.esm-fe19c1d8.js";import"./ripple.esm-dbab71b1.js";import"./tooltip.esm-146c7467.js";import"./inputnumber.esm-90bc6df8.js";import"./index.esm-36d8a129.js";import"./inputtext.esm-cc21ba52.js";import"./index.esm-71e4f6b0.js";import"./dropdown.esm-d4661825.js";import"./overlayservice.esm-34ff3081.js";import"./index.esm-52556c40.js";import"./index.esm-f3d54434.js";import"./index.esm-c234c44d.js";import"./index.esm-3a412f89.js";import"./index.esm-2facf168.js";import"./dialog.esm-57c7087f.js";import"./fieldset.esm-80633e4c.js";import"./editor.esm-f215848e.js";const te=()=>{const o=a.useRef(null),[m,x]=a.useState([]),[d,s]=a.useState(!1),[y,p]=a.useState(!1),[j,h]=a.useState(null),u=async()=>{s(!0);try{setTimeout(async()=>{const r=await f.get(route("catalogos.listado.clientes.empresa")),{data:t,status:c}=r;if(c==200){const n=t.map(i=>({id:i.id,nombre:i.abreviacion+" - "+i.nombre,numeroProvedor:i.numeroProvedor||"",email:i.email||"",telefono:i.telefono||""}));x(n),s(!1)}},800)}catch(r){s(!1),console.error(r),o.current.show({severity:"error",summary:"Error",detail:"No se logro cargar el Catalogo de Clientes",life:3e3})}},C=async r=>{try{const t=await f.get(route("catalogos.detalle.cliente.asc",{id:r})),{status:c,data:n}=t;c===200&&(h(n),p(!0))}catch{o.current.show({severity:"error",summary:"Error",detail:"No se pudo obtener la lista de clientes.",life:3e3})}},v=r=>{M({message:`¿Estas seguro de eliminar a : ${r.nombre} ?`,header:"Confirmacion de Eliminar",icon:"pi pi-info-circle",defaultFocus:"reject",acceptClassName:"p-button-danger",accept:()=>b(r.id),reject:()=>E()})},b=async r=>{s(!0);try{setTimeout(async()=>{const t=await f.delete(`${route("catalogo.eliminar.cliente",{id:r})}`),{data:c,status:n}=t;n===200&&(o.current.show({severity:"success",summary:"Registro Eliminado",detail:"Cliente Eliminado Correctamente",life:3e3}),s(!1),u())},800)}catch{o.current.show({severity:"error",summary:"Error",detail:"No se pudo eliminar el cliente.",life:3e3}),s(!1)}},E=()=>{o.current.show({severity:"warn",summary:"Sin Detalle",detail:"No se modifico ningun registro",life:3e3})};a.useEffect(()=>{u()},[]);const N=r=>e.jsxs("div",{className:"flex flex-wrap justify-content-center gap-1 mb-4",children:[e.jsx(g,{icon:"pi pi-eye",rounded:!0,severity:"info","aria-label":"User",onClick:()=>C(r.id)}),e.jsx(g,{icon:"pi pi-times",rounded:!0,severity:"danger","aria-label":"Cancel",onClick:()=>v(r),tooltip:"Eliminar",tooltipOptions:{position:"left"}})]});return e.jsxs("div",{className:"col-12",children:[e.jsx(S,{reloadRegistros:u,mostrarModal:y,setMostrarModal:p,registro:j}),e.jsxs("div",{className:"card",children:[d&&e.jsx("div",{className:"flex justify-content-center",children:e.jsx(P,{})}),d===!1&&m.length>0&&e.jsxs(w,{value:m,tableStyle:{minWidth:"50rem"},children:[e.jsx(l,{field:"nombre",header:"Nombre"}),e.jsx(l,{field:"numeroProvedor",header:"Num. Provedor"}),e.jsx(l,{field:"email",header:"Correo"}),e.jsx(l,{field:"telefono",header:"Teléfono"}),e.jsx(l,{field:"opciones",header:"Opciones",body:N})]}),d===!1&&m.length===0&&e.jsx(R,{severity:"info",text:"No existen registros suficientes"})]}),e.jsx(T,{ref:o}),e.jsx(D,{})]})};export{te as default};
